<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML><HEAD><TITLE>Список опкодов (INI)</TITLE>
<link rel="stylesheet" type="text/css" href="../../style/style.css">
<META http-equiv=Content-Type content="text/html; charset=windows-1251">
</HEAD>
<BODY topMargin=0 >
<TABLE
style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: #c0c0c0 1px solid"
height=121 cellSpacing=0 cellPadding=0 width=640>
  <TBODY>
  <TR>
    <TD vAlign=top width="100%"><IMG
      src="img/ru/logo2.jpg" width="640" height="121" border=0 class="conthdr" ></TD>
  </TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width=640 border=0>
  <TBODY>

  <TD width="100%" height="100%" vAlign=top>
   <DIV><IMG
      src="img/ru/old/SCM/articles.png" width="640" height="33"></DIV>


      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5><IMG height=36
            src="img/ru/mtdl.png" width=5></TD>
          <TD class=ntitle vAlign=top
          background="mtdbg.png" height=36> Список опкодов (INI)</TD>
          <TD width=5><IMG height=36
            src="img/ru/mtdr.png"
      width=20></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5 background="ltd.gif"></TD>
          <TD class=news vAlign=top><p>Основной файл, благодаря которому осуществляется процесс  компиляции и декомпиляции – INI-файл  со списком опкодов. Для каждой игры существует свой собственный список. В Sanny Builder’е эти файлы находятся  в папке data\&lt;имя  игры&gt;:
<DIV class="gText">
	data\gta3 &nbsp;: SCM.INI<br>
	data\vc &nbsp;&nbsp;&nbsp;: VCSCM.INI<br>
	data\sa &nbsp;&nbsp;&nbsp;: SASCM.INI<br>
	data\lcs &nbsp;&nbsp;: LCSSCM.INI<br>
	data\vcs &nbsp;&nbsp;: VCSSCM.INI<br>
</DIV>
<p>Все файлы имеют одинаковую структуру. В начале файла могут  идти специальные параметры с информацией о данном INI-файле. Откройте SASCM.INI и посмотрите:<br>
<br>
<br>
<b>VERSION</b> – в данной  строке определяется версия INI-файла. См. <a href="directives.htm#VERSION">директива $VERSION</a><br>
  <b>PUBLISHER</b>  – информация о человеке, выпустившем данную версию файла.<br>
  <b>DATE</b> – дата  последнего обновления.
<p>При декомпиляции эти значения вставляются в начале исходного файла.

<p>После этого идет перечень опкодов с указанием параметров.
<p><a name="syntax"></a>Каждая строка имеет следующий формат:<br>
<br>
<span class="gText">xxxx=N, yyyy</span>
<p>где <b>XXXX</b>  – номер опкода, N – число  параметров,<b> YYYY</b> – описание  опкода.
<p>Не допускается редактирование первых 2х значений (опкод и  число параметров). Описание опкода может меняться свободно.
<p>Обратите внимание на специальные элементы описания,  обозначенные символами %. Таким образом оформляется параметр опкода. Например:
<p class="gText">0001=1,wait %1d% ms
<p>Данная строка указывает декомпилятору, что при декомпиляции  опкода 0001 следует написать слова wait и ms, а между ними единственный параметр опкода.
<p>Цифра в параметре %1d%  указывает на его порядковый номер. Дело в том, что в некоторых опкодах  параметры могут идти не в том порядке, как они записаны в SCM. Делается это для удобства чтения  исходного кода. Например:
<p class="gText">0053=5,%5d% = create_player %1o% at %2d% %3d% %4d%
<p>Обратите внимание, декомпилятор записывает пятый параметр  опкода в самом начале. Если бы параметры шли в своем обычном порядке, опкод  0053 в исходнике выглядел бы как
<div class="mycode5">0053: сreate_player  <span class="general1-model">#NULL</span> at <span class="general1-number">2488.562 -1666.865 12.8757</span> <span class="general1-variable">$PLAYER_CHAR</span> </div>
<p>Следует отметить, что данный порядок следования параметров  характерен для gtama и SASCM.INI от  PLPynton.
<p>После порядкового номера в параметре стоит его тип. Он  обозначается одной из следующих букв:<br>
<br>
<b>d</b> = любое  значение<br>
  <b>p</b> = метка <br>
  <b>o</b> = имя модели <br>
  <b>g</b> = gxt-ключ <br>
  <b>x</b> = внешний  скрипт
<p>В зависимости от типа параметра, декомпилятор ведет себя  по-разному. Например, для параметров <b>g</b> он добавляет комментарий с содержимым gxt, для <b>p</b> он преобразует  число в метку, для <b>o</b> – пишет соответствующее имя модели (как в 0053 - <span class="general1-model">#null</span>).
<p class="general1-string">Внимание! Ни в коем случае нельзя  менять порядок следования параметров в опкоде, поскольку это приведет к  несовместимости исходных кодов у разных пользователей. Меняйте порядок  следования параметров <b>только </b>если вы  не собираетесь публиковать скрипт для других пользователей.
<p>Вы можете свободно менять слова-описания между параметрами,  а также типы параметров, если это требуется.
<p>Если в файле содержатся несколько одинаковых опкодов,  программа будет использовать тот, что идет позже. </TD>
          <TD width=5
        background="rtd.gif"></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5><IMG height=20
            src="img/ru/mtdlbot.png" width=5 border=0></TD>
          <TD align=left
            background="mtdbgbot.png"></TD>
          <TD class=ninfo align=right
          background="mtdbgbot.png">&nbsp;
            </TD>
          <TD width=5><IMG height=20
            src="img/ru/mtdrbot.png" width=5
        border=0></TD></TR></TBODY></TABLE></DIV>
<p></TD></TR><td width="100%"></TBODY></TABLE>
</TABLE></body></html>
