<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML><HEAD><TITLE>Создание миссии. Часть 4</TITLE>
<link rel="stylesheet" type="text/css" href="../../style/style.css">
<META http-equiv=Content-Type content="text/html; charset=windows-1251">
<script language="javascript" type="text/javascript" src="img/ru/clipboard.js"></script>
</HEAD>
<BODY topMargin=0 >
<TABLE
style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: #c0c0c0 1px solid"
height=121 cellSpacing=0 cellPadding=0 width=640>
  <TBODY>
  <TR>
    <TD vAlign=top width="100%"><IMG
      src="img/ru/logo2.jpg" width="640" height="121" border=0 class="conthdr" ></TD>
</TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width=640 border=0>
  <TBODY>

  <TD width="100%" height="100%" vAlign=top>
   <DIV><IMG
      src="img/ru/old/articles/articles.png" width="640" height="33"></DIV>


      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5><IMG height=36
            src="img/ru/mtdl.png" width=5></TD>
          <TD class=ntitle vAlign=top
          background="mtdbg.png" height=36>Создание миссии. Часть 4 </TD>
          <TD width=5><IMG height=36
            src="img/ru/mtdr.png"
      width=20></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5 background="ltd.gif"></TD>
          <TD class=news vAlign=top>
	[продолжение.  <a href="articles26.htm">начало читайте здесь </a>]
	<p>								Вы уже знаете как создавать миссии теперь пришло время научиться запускать эти миссии. В GTA по сути есть всего два способа запуска миссий:</p>
<ul>
<li> <a href="#singl">Запуск миссии при старте новой игры</a></li>
<li><a href="#cherg"> Запуск миссий из триггера</a>.</li></ul>
<p>
  В GTA SA миссии разделены на три категории:</p>
<ol>
<li> Технические миссии – это миссии не нуждаются в прохождении и чаще всего запускаются при старте новой игры. Простой пользователь даже не знает о их существовании. Например, миссии INITIAL и INITIL2 содержат в себе все или почти все сведения о пикапах, координатах маркеров, сфер, парковках авто и т.д. </li>

<li> Сюжетные миссии – миссии имеющие отношение к определенному персонажу игры (SWEET, SMOKE, RYDER, и т.д.).</li>

<li> Одиночные миссии – это чаще всего второстепенные (необязательные миссии), например, миссия игры на бильярде или так называемые подмиссии ( пожарного, медика и т.д.). Эти миссии могут запускаться бесконечное количество раз, в отличие от сюжетных миссий.
Есть одиночные миссии, так сказать, одноразового использования, например, миссии  «INTRO», «INTRO1», «INTRO2». Эти миссии являются обязательными для прохождения. Чаще всего прохождение этих миссий открывает возможность запуска следующего блока сюжетных миссий. </li></ol>
<p><strong>
<a name="singl"></a>Запуск миссии при старте новой игры.</strong></p>
<p>
Обычно производится запуск «технических» миссий «INITIAL» и «INITIL2», а также миссии «INTRO», чаще всего, не требующих вмешательства в игровой процесс пользователя. То есть миссия «INTRO» - это своего рода видео ролик. <br>
Запуск таких миссий производится из главного потока  (<span class="general1-string">'MAIN'</span>). </p>
<div class="mycode5">
<span class="general1-label">:MAIN_177</span><br>
<br>
…<br><br>
0417: <span class="general1-reservedword">start_mission</span> INITIAL<span class="general1-comment"> // Initial </span>1<br>
0001: <span class="general1-reservedword">wait</span><span class="general1-number"> 0</span> ms <br>
0417:<span class="general1-reservedword"> start_mission</span> INITIL2 <span class="general1-comment">// Initial 2</span><br><br>
…<br><br>
<span class="general1-label">:MAIN_1969</span><br><br>
…<br><br>
0417: <span class="general1-reservedword">start_mission</span> INTRO <span class="general1-comment">// Intro</span></div><p>
Предположим у Вас есть миссия и желательно, чтобы она начиналась при старте новой игры, но Вас смущает наличие в этой миссии кода провала. Как быть в этом случае? Делаем, стартер миссии и запускаем его только в том случае, если миссия провалена.</p>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard();"  ></span>
<TEXTAREA ID="holdtext" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext">
<span class="general1-label">:START</span>
<span class="general1-reservedword">wait</span> <span class="general1-number">0</span>
<span class="general1-variable">1@</span> = <span class="general1-class">Marker</span>.<span class="general1-command">CreateIconAndSphere</span>(<span class="general1-number">36</span>, <span class="general1-number">2490.768</span>, <span class="general1-number">-1669.816</span>, <span class="general1-number">13.3359</span>) <span class="general1-comment">// создаем маркер</span>

<span class="general1-label">:START_1</span>
<span class="general1-reservedword">wait</span> <span class="general1-number">250 </span>
<span class="general1-reservedword">if and</span>
   <span class="general1-class">Player</span>.<span class="general1-command">Defined</span>(<span class="general1-variable">$PLAYER_CHAR</span>)
0102:   actor <span class="general1-variable">$PLAYER_ACTOR</span> in_sphere <span class="general1-number">2490.7 -1669.8 13.4</span> radius <span class="general1-number">2.0 2.0 1.0</span> sphere <span class="general1-number">1</span> stopped_on_foot
<span class="general1-comment">//проверяем находится ли игрок в данной точке</span>
<span class="general1-reservedword">jf</span> <span class="general1-label">@START_1</span>
<span class="general1-class">Marker</span>.<span class="general1-command">Disable</span>(<span class="general1-variable">1@</span>) <span class="general1-comment">// удаляем маркер</span>
<span class="general1-reservedword">start_mission</span> FIRST <span class="general1-comment">//Старт миссии</span>
<span class="general1-reservedword">end_thread  </span><span class="general1-comment">// закрываем поток</span></pre></div>
<p>

В код провала вставим <span class="general1-reservedword">create_thread</span> <span class="general1-label">@START</span></p>
<div class="mycode5">
<span class="general1-label">:FIRST_145</span><br>
00BA: text_styled <span class="general1-string">'M_FAIL'</span> <span class="general1-number">5000</span> ms <span class="general1-number">1</span><span class="general1-comment">  // ~r~MISSION FAILED!</span><br>
<span class="general1-reservedword">create_thread</span> <span class="general1-label">@START</span><br>
<span class="general1-reservedword">return</span></div>
<br>
<p>

Пример: </p>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard1();"  ></span>
<TEXTAREA ID="holdtext1" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext1" class="NON"><span class="general1-comment">{
  use macro (Ctrl+J) "headsa"
  to insert a file header
}</span>
DEFINE MISSIONS <span class="general1-number">1</span> <span class="general1-comment">// общее количество миссий</span>
DEFINE MISSION <span class="general1-comment">{ID}</span> <span class="general1-number">0</span> AT <span class="general1-comment">{LABEL}</span> <span class="general1-label">@FIRST </span> <span class="general1-comment">// Ваша миссия</span>


DEFINE EXTERNAL_SCRIPTS <span class="general1-number">0</span> <span class="general1-comment">// Use -1 in order not to compile AAA script</span>
<span class="general1-comment">//DEFINE SCRIPT {NAME}  AT {LABEL} @</span>
DEFINE UNKNOWN_EMPTY_SEGMENT <span class="general1-number">0</span>
DEFINE UNKNOWN_THREADS_MEMORY <span class="general1-number">0</span>

<span class="general1-directive">{$VERSION 3.0.0000}</span>
<span class="general1-reservedword">thread</span><span class="general1-string"> 'MAIN'</span>
 <span class="general1-reservedword">var</span>
  <span class="general1-variable">$PLAYER_CHAR</span>: Player
 <span class="general1-reservedword">end</span> <span class="general1-comment">// var</span>
01F0: set_max_wanted_level_to <span class="general1-number">6</span>
<span class="general1-reservedword">set_wb_check_to</span> <span class="general1-number">0</span>
00C0: set_current_time <span class="general1-number">8 0 </span>
04E4: unknown_refresh_game_renderer_at <span class="general1-number">2488.5601 -1666.84 </span>
<span class="general1-class">Camera</span>.<span class="general1-command">SetAtPos</span>(<span class="general1-number">2488.5601</span>, <span class="general1-number">-1666.84</span>, <span class="general1-number">13.38</span>)
<span class="general1-variable">$PLAYER_CHAR</span> = <span class="general1-class">Player</span>.<span class="general1-command">Create</span>(<span class="general1-model">#NULL</span>, <span class="general1-number">2488.5601</span>, <span class="general1-number">-1666.84</span>, <span class="general1-number">13.38</span>)
<span class="general1-variable">$PLAYER_ACTOR</span> = <span class="general1-class">Actor</span>.<span class="general1-command">EmulateFromPlayer</span>(<span class="general1-variable">$PLAYER_CHAR</span>)
07AF: <span class="general1-variable">$PLAYER_GROUP</span> = player <span class="general1-variable">$PLAYER_CHAR</span> group
<span class="general1-class">Camera</span>.<span class="general1-command">SetBehindPlayer</span>
<span class="general1-reservedword">set_weather</span> <span class="general1-number">0 </span>
<span class="general1-reservedword">wait</span> <span class="general1-number">0</span> ms
<span class="general1-variable">$PLAYER_CHAR</span>.<span class="general1-command">SetClothes</span>(<span class="general1-string">"PLAYER_FACE"</span>, <span class="general1-string">"HEAD"</span>, Head)
<span class="general1-variable">$PLAYER_CHAR</span>.<span class="general1-command">SetClothes</span>(<span class="general1-string">"JEANSDENIM"</span>, <span class="general1-string">"JEANS"</span>, Legs)
<span class="general1-variable">$PLAYER_CHAR</span>.<span class="general1-command">SetClothes</span>(<span class="general1-string">"SNEAKERBINCBLK"</span>, <span class="general1-string">"SNEAKER"</span>, Shoes)
<span class="general1-variable">$PLAYER_CHAR</span>.<span class="general1-command">SetClothes</span>(<span class="general1-string">"VEST"</span>, <span class="general1-string">"VEST"</span>, Torso)
<span class="general1-variable">$PLAYER_CHAR</span>.<span class="general1-command">Build</span>
<span class="general1-variable">$PLAYER_CHAR</span>.<span class="general1-command">CanMove</span> = <span class="general1-reservedword">True</span>
<span class="general1-reservedword">select_interior</span> <span class="general1-number">0</span>
0629: change_stat <span class="general1-number">181</span> (islands unlocked) to <span class="general1-number">4</span>
016C: restart_if_wasted at <span class="general1-number">2027.77 -1420.52 15.99</span> angle <span class="general1-number">137.0</span> for_town_number <span class="general1-number">0</span>
016D: restart_if_busted at <span class="general1-number">1550.68 -1675.49 14.51</span> angle <span class="general1-number">90.0</span> for_town_number <span class="general1-number">0</span>
0180: set_on_mission_flag_to <span class="general1-variable">$ONMISSION</span> <span class="general1-comment">
// Note: your missions have to use the variable defined here ($ONMISSION)</span>
03E6: remove_text_box
<span class="general1-reservedword">fade</span> <span class="general1-number">0 500</span> ms

<span class="general1-label">:MAIN_49</span>
<span class="general1-reservedword"> if </span>
   <span class="general1-reservedword">fading </span>
<span class="general1-reservedword"> jf</span> <span class="general1-label">@MAIN_50 </span>
<span class="general1-reservedword">wait</span> <span class="general1-number">0</span> ms
00BE: text_clear_all
03E6: remove_text_box
<span class="general1-reservedword">jump</span> <span class="general1-label">@MAIN_49 </span>

<span class="general1-label">:MAIN_50 </span>
<span class="general1-reservedword">wait</span> <span class="general1-number">0</span> ms
<span class="general1-reservedword">start_mission</span> FIRST <span class="general1-comment">//Старт миссии</span>
end_thread

<span class="general1-comment">// put your mods (threads) here</span>

<span class="general1-label">:START</span><br><span class="general1-reservedword">wait</span> <span class="general1-number">0</span> <br><span class="general1-variable">1@</span> = <span class="general1-class">Marker</span>.<span class="general1-command">CreateIconAndSphere</span>(<span class="general1-number">36</span>, <span class="general1-number">2490.768</span>, <span class="general1-number">-1669.816</span>, <span class="general1-number">13.3359</span>)<br><br><span class="general1-label">:START_1</span><br><span class="general1-reservedword">wait</span> <span class="general1-number">250 </span><br><span class="general1-reservedword">if and</span><br><span class="general1-class">Player</span>.<span class="general1-command">Defined</span>(<span class="general1-variable">$PLAYER_CHAR</span>)<br>0102:   actor <span class="general1-variable">$PLAYER_ACTOR</span> in_sphere <span class="general1-number">2490.7 -1669.8 13.4</span> radius <span class="general1-number">2.0 2.0 1.0</span><br> sphere <span class="general1-number">1</span> stopped_on_foot<br><span class="general1-reservedword">jf</span> <span class="general1-label">@START_1</span> <br><span class="general1-class">Marker</span>.<span class="general1-command">Disable</span>(<span class="general1-variable">1@</span>)<br><span class="general1-reservedword">start_mission</span> FIRST <span class="general1-comment">//Старт миссии</span><br><span class="general1-reservedword">end_thread  </span>

<span class="general1-comment">//-------------Mission 0---------------
</span>
<span class="general1-label">:FIRST</span>
<span class="general1-reservedword">thread </span><span class="general1-string">'FIRST' </span>
<span class="general1-reservedword">gosub</span> <span class="general1-label">@FIRST_49</span> <span class="general1-comment"> // переход к коду миссии с возвратом на следующую строку</span>
<span class="general1-reservedword">if
wasted_or_busted</span> <span class="general1-comment"> // убит или арестован</span>
<span class="general1-reservedword">jf</span> <span class="general1-label">@FIRST_38</span>
<span class="general1-comment"> // если условие не выполнено, то переходим на метку FIRST_38,
// т.е.  gosub @FIRST_145 игнорируется.</span>
<span class="general1-reservedword">gosub</span> <span class="general1-label">@FIRST_145</span><span class="general1-comment"> // переход к коду провала с возвратом на следующую строку</span>

<span class="general1-label">:FIRST_38</span> <span class="general1-comment">// завершаем миссию</span>
<span class="general1-variable">$ONMISSION </span>= <span class="general1-number">0 </span>
<span class="general1-reservedword">mission_cleanup </span>
<span class="general1-reservedword">end_thread </span>

<span class="general1-label">:FIRST_49 </span>
<span class="general1-reservedword">increment_mission_attempts </span>
<span class="general1-variable">$ONMISSION</span> = <span class="general1-number">1</span>
  …
<span class="general1-comment">//----- Код миссии-----</span>
  …

<span class="general1-label">:FIRST_100</span>
0318: set_latest_mission_passed<span class="general1-string"> 'FIRST' </span> <span class="general1-comment">// 1st</span>
01E3: show_text_1number_styled GXT <span class="general1-string">'M_PASSS'</span> number <span class="general1-number">200</span> time <span class="general1-number">5000</span> style <span class="general1-number">1 </span>
<span class="general1-comment"> // MISSION PASSED!~n~~w~$~1~~n~~w~RESPECT +</span>
0998: add_respect <span class="general1-number">3 </span>
<span class="general1-class">Player</span>.<span class="general1-command">Money</span>(<span class="general1-variable">$PLAYER_CHAR</span>) += <span class="general1-number">200</span>
<span class="general1-class">Player</span>.<span class="general1-command">ClearWantedLevel</span>(<span class="general1-variable">$PLAYER_CHAR</span>)
0394: play_music <span class="general1-number">1</span>
<span class="general1-reservedword">return</span>  <span class="general1-comment">// возвращаемся на следующую после gosub @FIRST_49 строку</span>

<span class="general1-label">:FIRST_145</span>
00BA: text_styled<span class="general1-string"> 'M_FAIL'</span> <span class="general1-number">5000</span> ms <span class="general1-number">1</span>  <span class="general1-comment">// ~r~MISSION FAILED!</span>
<span class="general1-reservedword">create_thread</span> <span class="general1-label">@START</span>
<span class="general1-reservedword">return</span>  <span class="general1-comment">// возвращаемся на следующую после gosub @FIRST_145 строку</span>
</pre>
</div>
<p><strong><a name="cherg"></a> Запуск миссий из триггера.</strong></p>

<p>
Такой вариант запуска применяется к сюжетным миссиям. Для этого варианта нам понадобится глобальная переменная в качестве «счетчика» миссий. Назовем ее например: <span class="general1-variable">$NEW_TOTAL_PASSED_MISSIONS</span> и присвоим ей значение 0 (<span class="general1-variable">$NEW_TOTAL_PASSED_MISSIONS</span> = <span class="general1-number">0</span>). Запись этой переменной может быть произведена либо в главном потоке, а также в любом другом потоке или миссии, в котором будет вызываться стартер наших миссий.</p><p>
В коде миссии в блоке удачного прохождения увеличиваем значение переменной на единицу (<span class="general1-variable">$NEW_TOTAL_PASSED_MISSIONS</span> += <span class="general1-number">1</span>), тем самым предотвращаем повторный запуск первой миссии.</p>
<div class="mycode5">
  <pre class="NON"><span class="general1-label">:FIRST_100</span>
0318: set_latest_mission_passed<span class="general1-string"> 'FIRST' </span> <span class="general1-comment">// 1st</span>
01E3: show_text_1number_styled GXT <span class="general1-string">'M_PASSS'</span> number <span class="general1-number">200</span> time <span class="general1-number">5000</span> style <span class="general1-number">1 </span> <span class="general1-comment">
// MISSION PASSED!~n~~w~$~1~~n~~w~RESPECT +</span>
0998: add_respect <span class="general1-number">3 </span>
<span class="general1-class">Player</span>.<span class="general1-command">Money</span>(<span class="general1-variable">$PLAYER_CHAR</span>) += <span class="general1-number">200</span>
<span class="general1-class">Player</span>.<span class="general1-command">ClearWantedLevel</span>(<span class="general1-variable">$PLAYER_CHAR</span>)
<span class="general1-variable">$NEW_TOTAL_PASSED_MISSIONS</span> += <span class="general1-number">1</span>
<span class="general1-variable">$Marker_Sweet_House</span> = <span class="general1-class">Marker</span>.<span class="general1-command">CreateIconAndSphere</span>(<span class="general1-number">52</span>, <span class="general1-number">2468.632</span>, <span class="general1-number">-1650.888</span>, <span class="general1-number">13.4716</span>)
<span class="general1-comment">// создаем маркер для второй миссии</span>
0394: play_music <span class="general1-number">1</span>
<span class="general1-reservedword">return  </span></pre>
</div>
<p>
  А теперь напишем стартер для поочередного запуска нескольких миссий.</p>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard2();"  ></span>
<TEXTAREA ID="holdtext2" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext2" >
<span class="general1-label">:STARTER</span>
<span class="general1-reservedword">thread</span> <span class="general1-string">'STARTER'</span>
<span class="general1-variable">$Marker_Sweet_House</span> = <span class="general1-class">Marker</span>.<span class="general1-command">CreateIconAndSphere</span>(<span class="general1-number">16</span>, <span class="general1-number">2498.228</span>, <span class="general1-number">-1647.457</span>, <span class="general1-number">13.5479</span>)
<span class="general1-comment">// создаем маркер первой миссии</span>

<span class="general1-label">:STARTER_11</span>
<span class="general1-reservedword">wait</span> <span class="general1-number">250</span>
<span class="general1-reservedword">if </span>
  <span class="general1-variable">$NEW_TOTAL_PASSED_MISSIONS</span> == <span class="general1-number">2</span><span class="general1-comment"> // 2 – количество миссий </span>
<span class="general1-reservedword">jf</span> <span class="general1-label">@STARTER_36</span>  <span class="general1-comment">// если условие не выполнено то переходим на метку STARTER_36</span>
<span class="general1-reservedword">end_thread </span> <span class="general1-comment">// закрываем поток</span>

<span class="general1-label">:STARTER_36</span> <span class="general1-comment">// блок запуска первой миссии</span>
<span class="general1-reservedword">if</span>
  <span class="general1-class"> Player</span>.<span class="general1-command">Defined</span>(<span class="general1-variable">$PLAYER_CHAR</span>)
<span class="general1-reservedword">jf</span> <span class="general1-label">@STARTER_352 </span>
<span class="general1-reservedword">if</span>
  <span class="general1-variable">$ONMISSION</span> == <span class="general1-number">0</span> <span class="general1-comment">// не на миссии</span>
<span class="general1-reservedword">jf</span> <span class="general1-label">@STARTER_352</span>
<span class="general1-reservedword">if </span>
  <span class="general1-class"> Player</span>.<span class="general1-command">Controllable</span>(<span class="general1-variable">$PLAYER_CHAR</span>) <span class="general1-comment">//игроком можно управлять</span>
<span class="general1-reservedword">jf</span> <span class="general1-label">@STARTER_352 </span>
<span class="general1-reservedword">if</span>
 <span class="general1-variable"> $NEW_TOTAL_PASSED_MISSIONS</span> == <span class="general1-number">0</span>
<span class="general1-reservedword">jf</span> <span class="general1-label">@STARTER_219</span> <span class="general1-comment">// если условие не выполнено </span>
<span class="general1-reservedword">if </span>
00FF:   actor <span class="general1-variable">$PLAYER_ACTOR</span> sphere <span class="general1-number">0</span> in_sphere <span class="general1-number">2498.228 -1647.457 13.5479</span> radius <span class="general1-number">1.2 <br>1.2 2.0</span> on_foot <br><span class="general1-comment"> //проверяем находится ли игрок в данной точке</span>
<span class="general1-reservedword">jf</span> <span class="general1-label">@STARTER_352 </span>
<span class="general1-class">Marker</span>.<span class="general1-command">Disable</span>(<span class="general1-variable">$Marker_Sweet_House</span>)<span class="general1-comment"> // удаляем маркер</span>
<span class="general1-variable">$ONMISSION</span> = <span class="general1-number">1</span> <span class="general1-comment">// игрок находится на миссии</span>
00BA: show_text_styled GXT <span class="general1-string">'SWEET_1'</span> time <span class="general1-number">1000</span> style <span class="general1-number">2</span>  <span class="general1-comment">// выводим название миссии</span>
<span class="general1-reservedword">fade</span> <span class="general1-number">0 500 </span>

<span class="general1-label">:STARTER_187</span>
<span class="general1-reservedword">if
fading
jf</span> <span class="general1-label">@STARTER_215 </span>
<span class="general1-reservedword">wait</span> <span class="general1-number">0 </span>
00BE: text_clear_all <span class="general1-comment"> // убираем весь текст </span>
03E6: remove_text_box
<span class="general1-reservedword">jump</span> <span class="general1-label">@STARTER_187 </span>

<span class="general1-label">:STARTER_215</span>
<span class="general1-reservedword">start_mission </span>FIRST <span class="general1-comment">// запускаем первую миссию</span>

<span class="general1-label">:STARTER_219</span> <span class="general1-comment">// блок запуска второй миссии</span>
<span class="general1-reservedword">if </span>
  <span class="general1-variable">$NEW_TOTAL_PASSED_MISSIONS</span> == <span class="general1-number">1 </span>
<span class="general1-reservedword">jf</span> <span class="general1-label">@STARTER_352 </span>
<span class="general1-reservedword">if </span>
00FF:   actor <span class="general1-variable">$PLAYER_ACTOR</span> sphere<span class="general1-number"> 0</span> in_sphere <span class="general1-number">2468.632 -1650.888 13.4716</span> radius <span class="general1-number">1.2 <br>1.2 2.0</span> on_foot
<span class="general1-reservedword">jf</span> <span class="general1-label">@STARTER_352</span>
<span class="general1-class">Marker</span>.<span class="general1-command">Disable</span>(<span class="general1-variable">$Marker_Sweet_House</span>)<span class="general1-comment"> // удаляем маркер</span>
<span class="general1-variable">$ONMISSION</span> = <span class="general1-number">1</span>
00BA: show_text_styled GXT <span class="general1-string">'SWEET1B'</span> time <span class="general1-number">1000</span> style <span class="general1-number">2 </span> <span class="general1-comment">// Cleaning the Hood</span>
<span class="general1-reservedword">fade</span> <span class="general1-number">0 500 </span>

<span class="general1-label">:STARTER_320</span>
<span class="general1-reservedword">if
fading
jf</span> <span class="general1-label">@STARTER_348 </span>
<span class="general1-reservedword">wait</span> <span class="general1-number">0 </span>
00BE: text_clear_all
03E6: remove_text_box
<span class="general1-reservedword">jump</span> <span class="general1-label">@STARTER_320 </span>

<span class="general1-label">:STARTER_348</span>
<span class="general1-reservedword">start_mission</span> SECOND <span class="general1-comment">// запускаем вторую миссию</span>

<span class="general1-label">:STARTER_352</span>
<span class="general1-reservedword">jump</span> <span class="general1-label">@STARTER_11</span> <span class="general1-comment">//возвращаемся на метку STARTER_11</span>
</pre>
</div>
<p>
И на последок, вызывать этот поток (<span class="general1-reservedword">create_thread</span> <span class="general1-label">@STARTER</span>) можно как из главного потока, так и из любой предыдущей миссии. </p>

	<p><strong>Смотрите пример запуска миссий <a href="examples/missions_starter.txt" target="_blank">здесь</a>.</strong><br>
</p></TD>
          <TD width=5
        background="rtd.gif"></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5><IMG height=20
            src="img/ru/mtdlbot.png" width=5 border=0></TD>
          <TD align=left
            background="mtdbgbot.png"></TD>
          <TD class=ninfo align=right
          background="mtdbgbot.png">&nbsp;
            </TD>
          <TD width=5><IMG height=20
            src="img/ru/mtdrbot.png" width=5
        border=0></TD></TR></TBODY></TABLE></DIV>
<BR><BR></TD></TR><td width="100%"></TBODY></TABLE>
</TABLE></body></html>
