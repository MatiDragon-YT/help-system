<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML><HEAD><TITLE>Классы</TITLE>
<link rel="stylesheet" type="text/css" href="../../style/style.css">
<META http-equiv=Content-Type content="text/html; charset=windows-1251">

</HEAD>
<BODY topMargin=0 >
<TABLE
style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: #c0c0c0 1px solid"
height=121 cellSpacing=0 cellPadding=0 width=640>
  <TBODY>
  <TR>
    <TD vAlign=top width="100%"><IMG
      src="img/ru/logo2.jpg" width="640" height="121" border=0 class="conthdr" ></TD>
</TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width=640 border=0>
  <TBODY>

  <TD width="100%" height="100%" vAlign=top>
   <DIV><IMG
      src="img/ru/old/coding/articles.png" width="640" height="33"></DIV>


      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5><IMG height=36
            src="img/ru/mtdl.png" width=5></TD>
          <TD class=ntitle vAlign=top
          background="mtdbg.png" height=36>Классы</TD>
          <TD width=5><IMG height=36
            src="img/ru/mtdr.png"
      width=20></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5 background="ltd.gif"></TD>
          <TD class=news vAlign=top>
<b>Основные понятия</b>
<p>
   Sanny Builder допускает использование классов при написании кода.
   Классы - это группа опкодов, относящихся к какому-либо виду
объектов в игре: игрок, актер, машина и т.д.
</p>
<p>   Все классы заранее определены в файле classes.db и изменять их в
процессе кодинга невозможно. Все изменения вносятся напрямую в этот
файл.</p>
<p>
   Каждый класс обладает набором команд (опкодов). Их можно разделить
на несколько групп:</p>
<ul>
	<li> условные
	<li>процедуры (методы)
	<li>свойства
</ul>
<hr>
<b>
		Условные команды</b>

<p>
  Условные опкоды в списке команд, вызываемом нажатием Ctrl + [space],
обозначаются словом Check. Чаще всего у них один параметр - это
хендл (имя) владельца класса: машины, игрока и т.д.
	Например:</p>
<DIV class=mycode5>	<span class="general1-reservedword">if</span><br>
	 <span class="general1-class">Player</span>.<span class="general1-command">Defined</span>(<span class="general1-variable">$PLAYER_CHAR</span>)<br>
	 <span class="general1-reservedword">jf</span> <span class="general1-label">@anywhere</span></div>
<br><hr>

		<b>	Процедуры</b>
<p>
    Процедурные опкоды предназначены для выполнения какого-либо
конкретного действия в игре: движение объекта, уничтожение его и
т.п. Отдельный вид таких опкодов - это конструкторы, которые
создают объект (актера, машину)	и возвращают его хендл. В SB
конструкторы могут использоваться как процедура, так и как свойство.</p>
<DIV class=mycode5><pre><span class="general1-class">Player</span>.<span class="general1-command">Create</span>(<span class="general1-variable">$PLAYER_CHAR</span>, <span class="general1-model">#NULL</span>, <span class="general1-number">2488.5601</span>, <span class="general1-number">-1666.84</span>, <span class="general1-number">13.38</span>) - процедура
<span class="general1-variable">$PLAYER_CHAR</span> = <span class="general1-class">Player</span>.<span class="general1-command">Create</span>(<span class="general1-model">#NULL</span>, <span class="general1-number">2488.5601</span>, <span class="general1-number">-1666.84</span>, <span class="general1-number">13.38</span>) - свойство-конструктор</pre>
</div>
<p>
Эффект будет одинаков.
</p>

<hr>

<b>Свойства</b>
<p>
    Свойства класса используются для чтения или записи каких-либо значений внутри класса. Например свойство Money класса Player позволяет оперировать
с тремя опкодами:</p>
<DIV class=mycode5>	0109: player <span class="general1-variable">$PLAYER_CHAR</span> money += <span class="general1-number">1000000</span><br>
	010A:   player <span class="general1-variable">$PLAYER_CHAR</span> money > <span class="general1-variable">461@</span><br>
	010B: <span class="general1-variable">4@</span> = player <span class="general1-variable">$PLAYER_CHAR</span> money</div>
<p>
   После того как это свойство описано в файле classes.db вы можете
использовать следующие команды:</p>
<DIV class=mycode5>	player(<span class="general1-variable">$PLAYER_CHAR</span>).<span class="general1-command">Money</span> += <span class="general1-number">1000000</span><br>
	player(<span class="general1-variable">$PLAYER_CHAR</span>).<span class="general1-command">Money</span> > <span class="general1-variable">461@</span><br>
	<span class="general1-variable">4@</span> = player(<span class="general1-variable">$PLAYER_CHAR</span>).<span class="general1-command">Money</span></div>
<p>
   В настоящий момент существует серьезное ограничение по использованию
свойств в качестве операндов выражений. Sanny Builder может
скомпилировать только такие выражения, которые заранее прописаны в
файле classes.db. Т.е. вы не можете, например, использовать такое
выражение:</p>
<DIV class=mycode5>
player(<span class="general1-variable">$PLAYER_CHAR</span>).<span class="general1-command">Money</span> -= <span class="general1-number">1000000</span></div>
<br>
поскольку для операции вычитания нет отдельного опкода.
<br>

<a name="propertystringlimit"></a><p>В текущей версии существует ограничение на использование пробелов в строковых переменных в свойствах класса. Компилятор игнорирует все пустые символы в таком параметре. Например, такая команда</p>
<DIV class=mycode5><span class="general1-variable">0@</span> =  <span class="general1-class">File</span>.<span class="general1-command">Open</span>(<span class="general1-string">"file name"</span>,<span class="general1-string">"wb"</span>)</div>
<p>будет скомпилирована как</p>
<DIV class=mycode5><span class="general1-variable">0@</span> =  <span class="general1-class">File</span>.<span class="general1-command">Open</span>(<span class="general1-string">"filename"</span>,<span class="general1-string">"wb"</span>)</div>
<hr>

		<b>Члены класса</b>
<p>

   Начиная с версии 2.6 также можно <a href="variables.htm#VAREND">инициализировать переменные</a> как
члены класса и оперировать с ними как с классом.<br>
Например:</p>
<DIV class=mycode5>	<span class="general1-reservedword">var</span><br>
	 <span class="general1-variable">$PLAYER_CHAR</span>: Player<br>
	 <span class="general1-reservedword">end</span></div>
<p>
   Мы объявили переменную <span class="general1-variable">$PLAYER_CHAR</span> как класс <span class="general1-class">Player</span>. Теперь для
нее доступны все команды, какие есть для этого класса.<br>
	Например:</p>
<DIV class=mycode5>	<span class="general1-reservedword">if</span><br>
	 <span class="general1-variable">$PLAYER_CHAR</span>.<span class="general1-command">Defined</span><br>
	 <span class="general1-reservedword">jf</span> <span class="general1-label">@anywhere</span></div>
<p>
   Обратите внимание, что такие переменные будут компилироваться как
первый параметр, поэтому дублировать ее не следует. </p>
<DIV class=mycode5> <span class="general1-class">Player</span>.<span class="general1-command">SetClothes</span>(<span class="general1-variable">$PLAYER_CHAR</span>, <span class="general1-string">"PLAYER_FACE"</span>, <span class="general1-string">"HEAD"</span>, Head)<br>
=<br>
<span class="general1-variable">$PLAYER_CHAR</span>.<span class="general1-command">SetClothes</span>(<span class="general1-string">"PLAYER_FACE"</span>, <span class="general1-string">"HEAD"</span>, Head)</div>
<p>
   Такие переменные также можно переобъявлять и изменять их тип.<br>

</p>
<hr>

		<b>Класс Model</b>
<p>
   Класс Model можно использовать при помощи имен моделей, которые
всегда будут являться членами этого класса. Например, вы можете
использовать следующий код:</p>
<DIV class=mycode5>	<span class="general1-model">#AK47</span>.<span class="general1-command">Load</span><br>
<br>
	<span class="general1-label">:loop</span><br>
	<span class="general1-reservedword">wait</span> <span class="general1-number">0</span><br>
	<span class="general1-reservedword">if</span><br>
	 <span class="general1-model">#AK47</span>.<span class="general1-command">Available</span><br>
	 <span class="general1-reservedword">jf</span> <span class="general1-label">@loop</span></div>
<p>	Это будет тоже самое что</p>

<DIV class=mycode5>	<span class="general1-class">Model</span>.<span class="general1-command">Load</span>(<span class="general1-model">#AK47</span>)<br>
<br>
	<span class="general1-label">:loop</span><br>
	<span class="general1-reservedword">wait</span> <span class="general1-number">0</span><br>
	<span class="general1-reservedword">if</span><br>
	 <span class="general1-class">Model</span>.<span class="general1-command">Available</span>(<span class="general1-model">#AK47</span>)<br>
	 <span class="general1-reservedword">jf</span> <span class="general1-label">@loop</span></div>

<br><hr>

		<b>Расширенные названия параметров</b>
<p>

   В классах вы можете использовать текстовые названия для параметров
для повышения читабельности кода.<br>

	Например:</p>
<DIV class=mycode5>	<span class="general1-class">Player</span>.<span class="general1-command">SetClothes</span>(<span class="general1-variable">$PLAYER_CHAR</span>, <span class="general1-string">"VEST"</span>, <span class="general1-string">"VEST"</span>, Torso)</div>
<p>
   Torso - это параметр типа Extended.<br><br>
   Для облегчения использования расширенных названий, их список
для текущей команды может вызываться нажатием Ctrl + [space].<br>
Просто установите курсор туда, где должен быть расширенный параметр,<br>
(обозначается словом Extended во всплывающей подсказке), нажмите ctrl + [space]
и в редакторе появится список возможных имен с указанием числового
значения для каждого из них.</p>
          </TD>
          <TD width=5
        background="rtd.gif"></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5><IMG height=20
            src="img/ru/mtdlbot.png" width=5 border=0></TD>
          <TD align=left
            background="mtdbgbot.png"> </TD>
          <TD class=ninfo align=right
          background="mtdbgbot.png">&nbsp;
            </TD>
          <TD width=5><IMG height=20
            src="img/ru/mtdrbot.png" width=5
        border=0></TD></TR></TBODY></TABLE></DIV>
<BR><BR></TD></TR><td width="100%"></TBODY></TABLE>
</TABLE></body></html>
