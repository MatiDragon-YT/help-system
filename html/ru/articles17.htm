<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML><HEAD><TITLE> Видео и аудио</TITLE>
<link rel="stylesheet" type="text/css" href="../../style/style.css">
<META http-equiv=Content-Type content="text/html; charset=windows-1251">
<script language="javascript" type="text/javascript" src="img/ru/clipboard.js"></script>
</HEAD>
<BODY topMargin=0 >
<TABLE
style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: #c0c0c0 1px solid"
height=121 cellSpacing=0 cellPadding=0 width=640>
  <TBODY>
  <TR>
    <TD vAlign=top width="100%"><IMG
      src="img/ru/logo2.jpg" width="640" height="121" border=0 class="conthdr" ></TD>
</TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width=640 border=0>
  <TBODY>

  <TD width="100%" height="100%" vAlign=top>
   <DIV><IMG
      src="img/ru/old/articles/articles.png" width="640" height="33"></DIV>


      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5><IMG height=36
            src="img/ru/mtdl.png" width=5></TD>
          <TD class=ntitle vAlign=top
          background="mtdbg.png" height=36>  Видео и аудио</TD>
          <TD width=5><IMG height=36
            src="img/ru/mtdr.png"
      width=20></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5 background="ltd.gif"></TD>

          <TD class=news vAlign=top><p>Давайте начнём с видео эффектов. Сейчас я расскажу об управления камерами и о нескольких
                                                              эффектах. Я думаю,что объяснять вам,что такое камера,я не буду.<br>
                                                              К глубочайшему сожалению сделать что-то толковое и красивое невозможно, потому-что все ролики
                                                              в игре создаются не только скриптингом, но и всякими анимациями, сделанными в продвинутых
                                                              графических редакторах.<br>
              Вот список команд,которые использубтся во всех роликах игры:</p>
                                                            <p><span class="general1-class">Camera</span>.<span class="general1-command">SetPosition</span>(<span class="general1-number">664.9</span>,<span class="general1-number">-479.6</span>, <span class="general1-number">16.1</span>,<span class="general1-number">0.0</span>,<span class="general1-number">0.0</span>,<span class="general1-number">0.0</span>) - эта команда помещает камеру в заданную
                                                              точку карты<br>
                                                              664.9 - координата по оси X<br>
                                                              -479.6 - координата по оси Y <br>
                                                              16.1 - координата по оси Z<br>
              0.0, 0.0, 0.0 - вот эти послндние три параметра остаются такими всегда,везде они равны 0.0</p>
                                                            <p><span class="general1-class">Camera</span>.<span class="general1-command">PointAt</span>(<span class="general1-number">665.8948</span>, <span class="general1-number">-479.5685</span>, <span class="general1-number">16.4175</span>, <span class="general1-number">2</span>) - эта команда заставляет камеру посмотреть<br>
                                                              в заданную точку карты<br>
                                                              665.8948 - координата по оси X<br>
                                                              -479.5685 - координата по оси Y<br>
                                                              16.4175 - координата по оси Z<br>
                                                              2 - тип перемещения камеры.<br>
                                                              Всего есть два типа:<br>
  1 - допустим мы поставили камеру, направили её в какую-то точку, и теперь, если мы меняем точку, в которую смотрит камера, то действие перемены положения точки и камеры происходит<br>
  плавно, т.е. не мгновенный переход. Посмотрите пимер и всё поймёте.<br>
  2 - тоже самое, что и первое, но камера перемещается мгновенно </p>
              <p>Чтобы изменить скорость полёта и поворота камеры используем вот это:<br>
                                                              0460: set_camera_pointing_time <span class="general1-number">0.0 3000</span><br>
                                                              0.0 - не трогайте, этот параметр всегда такой<br>
                                                              3000 - время перемещения камеры<br>
                Эта команда действует только тогда, когда последний параметр команды <span class="general1-class">Camera</span>.<span class="general1-command">PointAt</span> равен <span class="general1-number">1</span></p>
                                                            <p>Также можно сделать так, чтобы камера смотрела на актёра,но сначало камеру надо поставить:<br>
                                                              <span class="general1-command">Camera</span>.<span class="general1-command">OnPed</span>(<span class="general1-variable">$PLAYER_ACTOR</span>, <span class="general1-number">15</span>, <span class="general1-number">2</span>) <br>
                                                              $PLAYER_ACTOR - актёр, на которого смотрит камера<br>
                                                              15 - не знаю<br>
                                                              2 - тип перемещения камеры, типы описаны выше</p>
                                                            <p>Чтобы камера смотрела на машину используем вот это:<br>
                                                              <span class="general1-class">Camera</span>.<span class="general1-command">OnVehicle</span>(<span class="general1-variable">$Car</span>, <span class="general1-number">15</span>, <span class="general1-number">2</span>)<br>
                                                              $Car - имя машины, на которую смотрит камера<br>
                                                              15 - не знаю<br>
                                                              2 - тип перемещения камеры, типы описаны выше</p>
                                                            <p>Камеру также можно поместить на автомобиль:<br>
                                                              0679: put_camera_on_vehicle <span class="general1-variable">$Car</span> offset <span class="general1-number">-5.0 -15.0 10.0</span> rotation <span class="general1-number">0.0 5.0 1.0 0.0 2</span><br>
                                                              $Car - машина, на которую ставится камера<br>
                                                              -5.0 -15.0 10.0 - координаты камеры относительно геом. центра машины<br>
                                                              0.0 5.0 1.0 - координаты относительно геом. центра машины, в которые смотрит камера<br>
                                                              0.0 - угол наклона камеры<br>
                                                              2 - тип перемещения камеры</p>
                                                            <p>Можно поставить камеру на автомобиль и заставить камеру смотреть на актёра:<br>
                                                              067B: put_camera_on_car <span class="general1-variable">$Car</span> offset <span class="general1-number">-1.5 1.5 1.5</span> point_to_actor <span class="general1-variable">$Actor</span> tilt <span class="general1-number">6.0 2</span> <br>
                                                              $Car - машина,на которую ставится камера<br>
                                                              -1.5 1.5 1.5 - положение камеры, относительно геометрического места машины<br>
                                                              $Actor - имя актёра, на которого будет смотреть камера<br>
                                                              6.0 - угол наклона камеры<br>
                                                              2 - тип перемещения камеры</p>
                                                            <p>Можно поставить камеру на автомобиль и заставить её смотреть на другой автомобиль:<br>
                                                              067A: put_camera_on_car <span class="general1-variable">$Car_1</span> offset <span class="general1-number">0.0 0.0 3.0</span> point_to_car <span class="general1-variable">$Car_2</span> tilt <span class="general1-number">0.0 2</span><br>
                                                              $Car_1 - машина,на которую ставится камера<br>
                                                              -1.5 1.5 1.5 - положение камеры, относительно геометрического места машины<br>
                                                              $Car_2 - имя машины, на которую будет смотреть камера<br>
                                                              6.0 - угол наклона камеры<br>
                                                              2 - тип перемещения камеры<br>
                                                              <br>
                                                              Есть интересная команда, которая помещает камеру в определённую точку, и в этой точке камеру
  можно вращать мышкой, вот эта команда:<br>
  0930: <strong>(unknown) </strong><span class="general1-number">1</span> <br>
  Но она только поместит камеру в точку 0.0 0.0 0.0 , её там можно будет вращать.<br>
  Но чтобы поместить камеру в др. точку, то после той команды пишем эту:<br>
  0936: set_camera <span class="general1-number">146.0 1558.4 104.4</span> position_to <span class="general1-number">146.0 1558.4 104.4 10</span> ms <span class="general1-number">1</span> <br>
  146.0 1558.4 104.4 - вот координаты точки, незабудьте, что они повторяются в конце команды.<br>
  То есть полная конструкция кода помещения камеры в данную точку выглядит вот так:</p>
  <div class="mycode5">
  0930: <span class="general1-reservedword">(unknown)</span> <span class="general1-number">1</span> <br>
  0936: set_camera <span class="general1-number">146.0 1558.4 104.4</span> position_to <span class="general1-number">146.0 1558.4 104.4 10</span> ms <span class="general1-number">1</span></div>
                                                            <p>Чтобы установить камеру позади игрока используем эту команду:<br>
                                                              <span class="general1-class">Camera</span>.<span class="general1-command">SetBehindPlayer</span></p>
                                                            <p>Можно сделать так, чтобы камера тряслась:<br>
                                                              <span class="general1-class">camera</span>.<span class="general1-command">Shake</span>(<span class="general1-number">400</span>)<br>
                                                              400 - если значение небольшое, типа этого, то камера несильно трясётся и небольшое время, как
  ставишь, например, 2000, то начинается дикая тряска, которая вообще не прекращается</p>
                                                            <p>Чтобы вернуть камеру в ёё исходное положение, т.е. к игроку используется вот эта команда:<br>
                                                              <span class="general1-class">Camera</span>.<span class="general1-command">Restore_WithJumpCut</span></p>
                                                            <p> Видео эффектов немного:</p>
                                                            <p>1) 02A3: toggle_widescreen <span class="general1-number">1</span> - включает широкий экран (исчезают радар,жизни... и появляются две
  чёрные линии внизу и вверху экрана)<br>
  02A3: toggle_widescreen <span class="general1-number">0</span> - выключает широкий экран</p>
                                                            <p>2) <strong>fade </strong><span class="general1-number">0 1500</span> - это затемнение экрана,наверное видили при начале миссии, как только на маркер
  заходишь<br>
  0 - показывает, что это затемнение, если поставить 1, то это будет просветление<br>
  1500 - время в миллисекундах, которой будет происходить затемнение (просветление)</p>
                                                            <p>3) 0169: set_fade_color <span class="general1-number">0 0 0</span> - устанавливает цвет затемнения</p>
                                                            <p>4) 0581: toggle_radar <span class="general1-number">0</span> - убирает с экрана радар</p>
                                                            <p>5) 0826: toggle_hud<span class="general1-number"> 0</span> - убирает с экрана звёздочки,иконку оружия, жизни,короче всё, кроме радара</p>
                                                            <p>Ещё есть полезная команда, которая очищает местность от актёров и машин:<br>
                                                              0395: clear_area <span class="general1-number">1</span> at <span class="general1-number">681.8004 -474.1063 15.5363</span> range <span class="general1-number">3.0</span><br>
                                                              681.8004 -474.1063 15.5363 - координаты очищения<br>
                                                              3.0 - радиус очищения</p>
                                                            <p>Не менее полезная команда, которая освежает местность по заданным координатам (X,Y),она применяется когда,мы помещаем камеру в точку, далёкую от игрока,или когда помещаем игрока на большое расстояние, просто текстуры там не успевают прорисоваться, а эта команда их прорисовывает:<br>
                                                              04E4: unknown_refresh_game_renderer_at <span class="general1-number">2488.5623 -1876.8645</span></p>
                                                            <p>Пример:</p>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard();"  ></span>
<TEXTAREA ID="holdtext" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext"><span class="general1-reservedword">create_thread</span> <span class="general1-label">@VideoTest</span> <span class="general1-comment">// создаём поток</span>

<span class="general1-label">:VideoTest</span> <span class="general1-comment">// начинаем поток</span>
<span class="general1-reservedword">wait</span> <span class="general1-number">7000</span> <span class="general1-comment">// ждём 7 сек</span>
<span class="general1-reservedword">fade</span> <span class="general1-number">0 1500</span> <span class="general1-comment">// затемнение</span>
<span class="general1-reservedword">wait </span><span class="general1-number">2000</span> <span class="general1-comment">// ждём 2 сек</span>
<span class="general1-reservedword">fade</span> <span class="general1-number">1 1500</span> <span class="general1-comment">// просветление</span>
<span class="general1-reservedword">wait</span> <span class="general1-number">1500</span><span class="general1-comment"> // ждём 1.5 сек</span>
<span class="general1-class">camera</span>.<span class="general1-command">SetPosition</span>(<span class="general1-number">2490.7458</span>,<span class="general1-number">-1677.2081</span>,<span class="general1-number">27.4875</span> ,<span class="general1-number">0.0</span>,<span class="general1-number">0.0</span>,<span class="general1-number">0.0</span> ) <span class="general1-comment">// уставливаем камеру</span>
<span class="general1-class">camera</span>.<span class="general1-command">PointAt</span>(<span class="general1-number">2500.9705</span>,<span class="general1-number">-1689.441</span>,<span class="general1-number">13.5505</span>,<span class="general1-number">2</span>) <span class="general1-comment">// направляем на дом Карла</span>
<span class="general1-reservedword">wait</span> <span class="general1-number">5000</span> <span class="general1-comment">// ждём 5 сек</span>
<span class="general1-class">camera</span>.<span class="general1-command">PointAt</span>(<span class="general1-number">2487.7231</span>,<span class="general1-number">-1652.1099</span>,<span class="general1-number">13.5006</span>,<span class="general1-number">1</span>)<span class="general1-comment"> // камера плавно направ. к дому OG</span>
0460: set_camera_pointing_time <span class="general1-number">0.0 3000</span> <span class="general1-comment">// устанавливаем время перемещения</span>
<span class="general1-reservedword">wait</span> <span class="general1-number">6000</span> <span class="general1-comment">// ждём 6 сек</span>
<span class="general1-class">camera</span>.<span class="general1-command">SetPosition</span>(<span class="general1-number">2542.6858</span>,<span class="general1-number">-1673.5902</span>,<span class="general1-number">43.5122</span>,<span class="general1-number">0.0</span>,<span class="general1-number">0.0</span>,<span class="general1-number">0.0</span>)<br> <span class="general1-comment">// уст. нов. позицию камеры</span>
<span class="general1-class">camera</span>.<span class="general1-command">PointAt</span>(<span class="general1-number">2464.5034</span>,<span class="general1-number">-1668.6432</span>,<span class="general1-number">13.4745</span>,<span class="general1-number">1</span>) <br><span class="general1-comment">// уст. нов. точку,на которую смотрит к-ра</span>
0460: set_camera_pointing_time <span class="general1-number">0.0 3000 </span><span class="general1-comment">// устанавливаем время перемещения</span>
<span class="general1-reservedword">wait</span> <span class="general1-number">8000</span> <span class="general1-comment">// ждём 8 сек</span>
<span class="general1-class">camera</span>.<span class="general1-command">Restore_WithJumpCut</span> <span class="general1-comment">// возвращаем камеру в нормальное состояние</span>
<span class="general1-reservedword">end_thread</span> <span class="general1-comment">// заканчиваем поток</span></pre></div>
                                                            <p>Если что непонятно, то на вопросы на форум.</p>

                                                            <p> Теперь давайте перейдём к аудио эффектам.<br>
                                                              Применять аудио эффекты дело довольно сложное, точнее не применять, а найти нужный звук, в игре
                                                              их очень-очень много, вот как добавить свой я не знаю, наверное должна быть программа для редактирования аудио в SA, но я её не разу не видел.<br>
                                                              Чтобы проиграть звук надо сначало его загрузить, делается это вот этой командой:<br>
                                                              03CF: load_wav <span class="general1-number">43205</span> as <span class="general1-number">1</span> <br>
  43205 - номер звука, номера и описания написаны в файле AudioEvents.txt из папки Data .<br>
  1 - номер,под каким его будете использовать Вы в своём скрипте, можно вместо номера писать<br>
  и переменную, например:</p>
  <div class="mycode5">
  03CF: load_wav <span class="general1-number">43205</span> as <span class="general1-variable">1@ </span></div>
  <br>
  или<br><div class="mycode5">
  03CF: load_wav <span class="general1-number">43205 </span>as <span class="general1-variable">$MyWav</span> </div>
                                                            <p>Чтобы проиграть звук используем вот эту команду:<br>
                                                              03D1: play_wav 3 <br>
              3 - ваш номер, Вы его присвоили звуку в команде &quot;load_wav&quot;, вместо номера можно написать и переменную, например:</p>
															<div class="mycode5">   03D1: play_wav <span class="general1-variable">1@</span> </div>
															<br>
или <br><br>
<div class="mycode5">03D1: play_wav <span class="general1-variable">$MyWav</span> </div>
<p>В конце потока надо выгружать звуки вот этой командой:<br>
040D: unload_wav <span class="general1-number">3</span><br>
3 - ваш номер,Вы его присвоили звуку в команде &quot;load_wav&quot;,вместо номера можно написать и переменную, например:</p>
<div class="mycode5">  040D: unload_wav <span class="general1-variable">1@ </span></div>
<br>
или <br><br>
<div class="mycode5">
040D: unload_wav <span class="general1-variable">$MyWav</span> </div>
<p>Вот этой командой можно установить точку на карте, из которой будет исходить звук:<br>
03D7: set_wav <span class="general1-number">3</span> location<span class="general1-number"> 1600.0 1200.0 32.0 </span><br>
3 - ваш номер,Вы его присвоили звуку в команде &quot;load_wav&quot;.<br>
1600.0 1200.0 32.0 - координаты.</p>
                                                            <p>Также можно присваивать переменным звуки:<br>
                                                              04AF: <span class="general1-variable">1@</span> = unknown_wav_reference <span class="general1-number">43200 </span><br>
                                                              1@ - ваша переменная<br>
                                                              43200 - игровой номер звука</p>
                                                            <p>Можно прицепить звук к актёру:<br>
                                                              0949: link_wav <span class="general1-number">3</span> to_actor <span class="general1-variable">$Actor</span><br>
              3 - ваш номер, Вы его присвоили звуку в команде &quot;load_wav&quot;, вместо номера можно написать и переменную, например:</p>
															  <div class="mycode5"> link_wav <span class="general1-variable">1@</span> to_actor <span class="general1-variable">$Actor</span></div>
															  <br>
														      или<br><br><div class="mycode5">
														      link_wav <span class="general1-variable">$MyWav</span> to_actor<span class="general1-variable"> $Actor </span></div>
  <p>$Actor - имя актёра, к которому прицепляем звук.</p>
                                                            <p>0917: audio_zone <span class="general1-string">'MADDOGL'</span> enable_sound <span class="general1-number">1</span> - включить (1)/выключить (0) мелодию к-л зоны, например, как в казино, клубе или, может помнете, в Вайсе в супермаркете.</p>
                                                            <p>Проверки к звукам (всего 2):</p>
                                                            <p>1. 03D0: wav <span class="general1-variable">3@</span> loaded - звук загружен<br>
              83D0: not wav <span class="general1-variable">3@</span> loaded - звук не загружен</p>
                                                            <p>2. 03D2: wav <span class="general1-variable">3@</span> ended - звук закончился<br>
              83D2: not wav <span class="general1-variable">3@</span> ended - звук не закончился</p>
            </TD>
          <TD width=5
        background="rtd.gif"></TD></TR>
        </TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5><IMG height=20
            src="img/ru/mtdlbot.png" width=5 border=0></TD>
          <TD align=left
            background="mtdbgbot.png"></TD>
          <TD class=ninfo align=right
          background="mtdbgbot.png">&nbsp;
            </TD>
          <TD width=5><IMG height=20
            src="img/ru/mtdrbot.png" width=5
        border=0></TD></TR></TBODY></TABLE></DIV>
<BR><BR></TD></TR><td width="100%"></TBODY></TABLE>
</TABLE></body></html>
