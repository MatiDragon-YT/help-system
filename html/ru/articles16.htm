<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML><HEAD><TITLE>Условия </TITLE>
<link rel="stylesheet" type="text/css" href="../../style/style.css">
<META http-equiv=Content-Type content="text/html; charset=windows-1251">
<script language="javascript" type="text/javascript" src="img/ru/clipboard.js"></script>
</HEAD>
<BODY topMargin=0 >
<TABLE
style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: #c0c0c0 1px solid"
height=121 cellSpacing=0 cellPadding=0 width=640>
  <TBODY>
  <TR>
    <TD vAlign=top width="100%"><IMG
      src="img/ru/logo2.jpg" width="640" height="121" border=0 class="conthdr" ></TD>
</TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width=640 border=0>
  <TBODY>

  <TD width="100%" height="100%" vAlign=top>
   <DIV><IMG
      src="img/ru/old/articles/articles.png" width="640" height="33"></DIV>


      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5><IMG height=36
            src="img/ru/mtdl.png" width=5></TD>
          <TD class=ntitle vAlign=top
          background="mtdbg.png" height=36>  Условия  </TD>
          <TD width=5><IMG height=36
            src="img/ru/mtdr.png"
      width=20></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5 background="ltd.gif"></TD>

          <TD class=news vAlign=top><p>Сейчас я расскажу вам об операторах перехода. Переходы бывают условные и безусловные. Безусловные переходы бывают двух типов - с возвратом и без возврата.
Для перехода с возвратом используется команда gosub @"Туда надо перейти", а для безвозвратного
перехода существует jump @"Туда надо перейти". Отличие возвратного перехода от безвозвратного
в том, что при возвратном переходе скрипт, дойдя до строчки gosub @"Туда надо перейти" будет
выполнять всё после объявления лэйбла "Туда надо перейти" до тех пор, пока скрипт не встретит
команду return, после чего выполнение перейдет к строчке после gosub @"Туда надо перейти", а
при безвозвратном переходе после строчки jump @"Туда надо перейти" действие перейдет к лэйблу
"Туда надо перейти" и все команды после jump будут проигнорированы. Условные переход всегда безвозвратные. О переходах смотреть также <a href="articles27.htm">здесь</a>.<br>
Условный переход всегда происходит после выполнения какого-либо условия. Все условия состоят из
трёх частей:<br>
 1 - объявление самого условия<br>
 2 - написание подусловий<br>
 3 - что делать после (не) выполнения или просто-напросто переход.<br>
Любое условие начинается со строки с текстом "if", если вы хотите, чтобы все подусловия (ещё их
называют проверки) вашего условия выполнялись, то после "if" надо ставить "and" (между ними пробел), а если хотите, чтобы была проверка на выполнение хотя бы одного подусловия, то вместо "and"
ставьте "or".<br>
<br>
Например:<br><br>
 1) Проверка с выполнением всех подусловий:</p>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard();"  ></span>
<TEXTAREA ID="holdtext" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext"><span class="general1-reservedword">create_thread</span><span class="general1-label"> @Test1</span>

<span class="general1-label">:Test1</span>
<span class="general1-reservedword">wait </span><span class="general1-number">0</span><span class="general1-reservedword">
if and</span>
  0102: actor <span class="general1-variable">$PLAYER_ACTOR</span> stopped_near_point_on_foot <span class="general1-variable">$X $Y $Z</span> radius <span class="general1-variable">$X_R $Y_R $Z_R</span> sphere <span class="general1-number">0</span>
  8184: not actor <span class="general1-variable">$PLAYER_ACTOR</span> health >= <span class="general1-number">99</span>
<span class="general1-reservedword">jf</span> <span class="general1-label">@Test1</span>
<span class="general1-class">actor</span>.<span class="general1-command">health</span>(<span class="general1-variable">$PLAYER_ACTOR</span>) = <span class="general1-number">100</span>
<span class="general1-reservedword">end_thread </span></pre>
</div>
   <p>Принцип таков:<br>
Если игрок(CJ) остановился по заданным координатам <span class="general1-variable">$X $Y $Z</span>, точнее в радиусе <span class="general1-variable">$X_R $Y_R $Z_R</span> от
этих координат, и если его жизни меньше 100, то его жизнь опять станет равной 100. Параметр 0 в
конце первого подусловия указывает, что игрок останавливается не в сфере(красный маркер). Если
параметр был бы равен 1, то надо было бы создать сначала сферу, но о сферах потом. Опкод"<span class="general1-reservedword">jf</span> <span class="general1-label">@Test1</span>"
делает переход на "Test1", если оба наших условия не выполнились.<br>
<br>
 2) Проверка с выполнением хотя-бы одного подусловия:</p>


<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard1();"  ></span>
<TEXTAREA ID="holdtext1" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext1"><span class="general1-reservedword">create_thread</span> <span class="general1-label">@Test2</span>

<span class="general1-label">:Test2</span>
<span class="general1-reservedword">wait</span><span class="general1-number"> 0</span><span class="general1-reservedword">
if or</span>
  0102: actor <span class="general1-variable">$PLAYER_ACTOR</span> stopped_near_point_on_foot <span class="general1-variable">$X $Y $Z</span> radius <span class="general1-variable">$X_R $Y_R $Z_R</span> sphere <span class="general1-number">0</span>
  8184: <span class="general1-reservedword">not</span> actor <span class="general1-variable">$PLAYER_ACTOR</span> health &gt;= <span class="general1-number">99</span>
<span class="general1-reservedword">jf</span> <span class="general1-label">@Test2</span>
<span class="general1-class">actor</span>.<span class="general1-command">health</span>(<span class="general1-variable">$PLAYER_ACTOR</span>) = <span class="general1-number">100</span>
<span class="general1-reservedword">end_thread </span></pre>
</div>
<p>
Тут описано, что если игрок остановился в заданном радиусе от точки с координатами <span class="general1-variable">$X $Y $Z</span> или
если жизнь игрока стала меньше 100, то жизнь станет равна 100. Тут при выполнении хотя бы одного
подусловия, будет выполнятся наше действие, т.е жизнь CJ'я станет 100.<br>
Жизнь - целое число, а вот координаты и радиусы - дробные. Если даже вам надо использовать радиус
равный 10, то надо написать 10.0.<br>
Чтобы поток не был одноразового использования надо в конце вместо &quot;end_thread&quot; поставить &quot;jump
на начало&quot;, в данном случае - это <span class="general1-reservedword">Jump</span> <span class="general1-label">@Test2</span>.<br>
Вот вам пример первого(Test1) скрипта, но уже с координатами, радиусами... :</p>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard2();"  ></span>
<TEXTAREA ID="holdtext2" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext2">
<span class="general1-reservedword">create_thread</span> <span class="general1-label">@Example1</span>
<span class="general1-label">
:Example1</span>
<span class="general1-reservedword">wait </span><span class="general1-number">0</span><span class="general1-reservedword">
if and
  </span>0102: actor <span class="general1-variable">$PLAYER_ACTOR</span> near_pt <span class="general1-number">2505.4812 -1687.4213 13.5543</span> radius <span class="general1-number">10.0 10.0 10.0</span> sphere <span class="general1-number">0</span>
  8184: <span class="general1-reservedword">not</span> actor <span class="general1-variable">$PLAYER_ACTOR</span> health &gt;= <span class="general1-number">99</span>
<span class="general1-reservedword">jf</span> <span class="general1-label">@Example1</span>
<span class="general1-class">actor</span>.<span class="general1-command">health</span>(<span class="general1-variable">$PLAYER_ACTOR</span>) = <span class="general1-number">100</span>
<span class="general1-reservedword">jump</span> <span class="general1-label">@Example1</span></pre>
</div>
<p>
Если жизнь игрока меньше 100, и он стоит около гаража CJ'я, то его жизнь становится равной 100.
Заметьте, что этот скрипт зациклен, он работает всегда, потому что есть переход в его конце на
его начало.<br>
С самого начала вставляйте &quot;create_thread @Example1&quot; после другого &quot;create_thread&quot;, второй можно найти с помощью поиска. Потом ищем &quot;----Mission 0----&quot; и перед ней вставляем всё, что
идёт в нашем скрипте начиная с &quot;:Example1&quot; заканчивая &quot;jump @Example1&quot; включительно. Жмём &quot;F7&quot;,
и ждём, пока пройдёт компиляция. Когда закомпилировалось жмите &quot;F8&quot; - запуск SA и начинайте новую
игру.<br><br>
<span class="text3">Внимание!</span> В проверках существует только знак &quot;&gt;&quot;, знака &quot;&lt;&quot; не существует, вместо него можно перед всем опкодом написать слово &quot;not&quot;, это будет равносильно знаку &quot;&lt;&quot;, это применимо к командам
без кодовых слов. В проверках-утверждених (в которых нет слова &quot;not&quot;) опкод (кодовое слово) нач-
ся с &quot;0&quot;, а во всех проверках-отрецаниях используется тот же самый опкод, но уже вместо &quot;0&quot; там
ставится цифра &quot;8&quot;. Поэтому если у вас есть утверждение, то вы можете, поменять первую цифру, т.е.
&quot;0&quot; на &quot;8&quot; и после знака &quot;:&quot; поставить &quot;not&quot;, и это уже будет проверка-отрецание и наоборот.<br>
Например:<br>
Вот у меня есть проверка &quot;игрок плавает в воде&quot;, она имеет следующий вид:</p>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard3();"  ></span>
<TEXTAREA ID="holdtext3" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext3" class="NON">
<span class="general1-label">:Label1</span>
<span class="general1-reservedword">wait</span> <span class="general1-number">0</span> ms
<span class="general1-reservedword">if</span> <span class="general1-comment">// если у нас только одно подусловие или проверка,
// то не &quot;or&quot; не &quot;and&quot; писать не надо.</span>
0965: actor <span class="general1-variable">$PLAYER_ACTOR</span> swimming_in_water
<span class="general1-reservedword">jf</span> <span class="general1-variable">@Label1</span> <span class="general1-comment">// если подусловие не выполнилось, то переходим на начало.</span></pre></div>
<p>
Допустим у меня в скрипте должны выполнятся действия, когда игрок не в воде, а у меня в проверке написано, что действие скрипта дальше не пойдёт, если игрок не будет в воде, следовательно
надо сделать проверку &quot;игрок не плавает&quot;. Заменяем первоначальную проверку проверкой,
противоположной по значению. И вот, что получилось:<br>
8965: <span class="general1-reservedword">not</span> actor <span class="general1-variable">$PLAYER_ACTOR</span> swimming_in_water<br>
Что я сделал, я заменил первую цифру опкода,т.е. &quot;0&quot; на &quot;8&quot; и после двоеточия поставил слово &quot;not&quot;.<br>
А если у вас есть проверка-отрецание и вам надо сделать проверку-утверждение, то ищите
первую цифру опкода (она должна быть - 8), затем меняйте её на 0, убирайте слово &quot;not&quot; и
получите свою проверку-утверждение.<br>
Это можно делать со всеми проверками, в которых есть кодовые слова.<br>
Максимальное число проверок - 7 штук, если надо больше, то разбейте их на несколько частей,<br>
например:<br>
У нас есть 10 моделей, которые мы должны проверить на загруженность, но макс. кол-во проверок
всего лишь 7, поэтому разбиваем проверки на две части, в первой будет 7, а во второй 3, и вот, что
получается:</p>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard4();"  ></span>
<TEXTAREA ID="holdtext4" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext4" class="NON">
<span class="general1-label">:Test</span>
<span class="general1-reservedword">wait </span><span class="general1-number">0
</span><span class="general1-reservedword">if and</span>
  <span class="general1-class">model</span>.<span class="general1-command">Available</span>(<span class="general1-model">#1</span>)
  <span class="general1-class">model</span>.<span class="general1-command">Available</span>(<span class="general1-model">#2</span>)
  <span class="general1-class">model</span>.<span class="general1-command">Available</span>(<span class="general1-model">#3</span>)
  <span class="general1-class">model</span>.<span class="general1-command">Available</span>(<span class="general1-model">#4</span>)
  <span class="general1-class">model</span>.<span class="general1-command">Available</span>(<span class="general1-model">#5</span>)
  <span class="general1-class">model</span>.<span class="general1-command">Available</span>(<span class="general1-model">#6</span>)
  <span class="general1-class">model</span>.<span class="general1-command">Available</span>(<span class="general1-model">#7</span>)
<span class="general1-reservedword">jf </span><span class="general1-label">@Test</span><span class="general1-reservedword">
if and</span>
  <span class="general1-class">model</span>.<span class="general1-command">Available</span>(<span class="general1-model">#8</span>)
  <span class="general1-class">model</span>.<span class="general1-command">Available</span>(<span class="general1-model">#9</span>)
  <span class="general1-class">model</span>.<span class="general1-command">Available</span>(<span class="general1-model">#10</span>)
<span class="general1-reservedword">jf</span> <span class="general1-label">@Test</span></pre>
</div>
<p>
  Вот такая проверочка вышла. Если что-то не понятно, то заходите на <a href="http://gtamaps.net/forum" target="_blank">http://gtamaps.net/forum</a> .<br>
  Cам игрок тоже явл. актёром, только когда мы работаем с опкодами (командами) в которых есть
  слово &quot;player&quot; надо использовать &quot;<span class="general1-variable">$PLAYER_CHAR</span>&quot;, а когда работаем с актёрами, то &quot;<span class="general1-variable">$PLAYER_ACTOR</span>&quot;.</p>
</TD>
          <TD width=5
        background="rtd.gif"></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5><IMG height=20
            src="img/ru/mtdlbot.png" width=5 border=0></TD>
          <TD align=left
            background="mtdbgbot.png"></TD>
          <TD class=ninfo align=right
          background="mtdbgbot.png">&nbsp;
            </TD>
          <TD width=5><IMG height=20
            src="img/ru/mtdrbot.png" width=5
        border=0></TD></TR></TBODY></TABLE></DIV>
<BR><BR></TD></TR><td width="100%"></TBODY></TABLE>
</TABLE></body></html>
