<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML><HEAD><TITLE> Миссии</TITLE>
<link rel="stylesheet" type="text/css" href="../../style/style.css">
<META http-equiv=Content-Type content="text/html; charset=windows-1251">
<script language="javascript" type="text/javascript" src="img/ru/clipboard.js"></script>
</HEAD>
<BODY topMargin=0 >
<TABLE
style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: #c0c0c0 1px solid"
height=121 cellSpacing=0 cellPadding=0 width=640>
  <TBODY>
  <TR>
    <TD vAlign=top width="100%"><IMG
      src="img/ru/logo2.jpg" width="640" height="121" border=0 class="conthdr" ></TD>
</TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width=640 border=0>
  <TBODY>

  <TD width="100%" height="100%" vAlign=top>
   <DIV><IMG
      src="img/ru/old/articles/articles.png" width="640" height="33"></DIV>


      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5><IMG height=36
            src="img/ru/mtdl.png" width=5></TD>
          <TD class=ntitle vAlign=top
          background="mtdbg.png" height=36>  Миссии</TD>
          <TD width=5><IMG height=36
            src="img/ru/mtdr.png"
      width=20></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5 background="ltd.gif"></TD>

          <TD class=news vAlign=top><p>В этой главе, как Вы уже догадались, я расскажу о создании миссий. Не рассказать о создании  гоночных тоже было бы не вежливо с моей стороны, поэтому и о них тоже тут, давайте начнём...<br>
  <br>

Чтобы создать миссию нам надо:<br>
1) Находим строку " DEFINE MISSIONS " и к числу миссий прибавляем 1, т.е. всего у вас должно
    получиться число равное количеству миссий минус 1 . <br>
2) Снизу идут строчки с командами объявления label'ов миссий, идём в их конец, и после последней
    строчки " DEFINE MISSION " добавляем " DEFINE MISSION № @1LabelMissii " .<br>
3) Создаём поток(thread) с любым именем, для удобства давайте возьмём " Mission1Start "<br>
4) Ищем строчку " //-------------Mission 0--------------- " и перед ней пишем наш поток, в потоке должны     находиться те или иные проверки, которые приведут к началу миссии, естественно это     обыкновенный поток и в него можно всунуть что угодно, ну лично я создаю в нём только маркер,
    и если игрок на нём останавливается, то маркер убираем и начинаем миссию.<br>
    Вот например:</p>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard();"  ></span>
<TEXTAREA ID="holdtext" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext" class="NON">
<span class="general1-label">:Mission1Start
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0
</span><span class="general1-reservedword">if
</span><span class="general1-class">player</span><span class="general1-symbol">.</span><span class="general1-command">defined</span><span class="general1-symbol">(</span><span class="general1-variable">$PLAYER_CHAR</span><span class="general1-symbol">)
</span><span class="general1-reservedword">Jf</span><span class="general1-space"> </span><span class="general1-label">@Mission1Start
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">3000
</span><span class="general1-class">Marker</span><span class="general1-symbol">.</span><span class="general1-command">CreateIconAndSphere</span><span class="general1-symbol">(</span><span class="general1-variable">$Name</span><span class="general1-space"> , </span><span class="general1-variable">$Icon_Number</span><span class="general1-space"> , </span><span class="general1-variable">$X</span><span class="general1-symbol">, </span><span class="general1-variable">$Y</span><span class="general1-symbol">, </span><span class="general1-variable">$Z</span><span class="general1-space"> )
</span><span class="general1-comment">// номера иконок в гл "Маркеры..."

</span><span class="general1-label">:Mission1Start_2</span><span class="general1-space">
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0
</span><span class="general1-reservedword">if</span><span class="general1-space"> </span><span class="general1-reservedword">and
</span><span class="general1-symbol">0101: actor </span><span class="general1-variable">$PLAYER_ACTOR</span><span class="general1-space"> stopped_near_point </span><span class="general1-variable">$X</span><span class="general1-space"> </span><span class="general1-variable">$Y</span><span class="general1-space"> </span><span class="general1-variable">$Z</span><span class="general1-space"> radius </span><span class="general1-number">3.0</span><span class="general1-space"> </span><span class="general1-number">3.0</span><span class="general1-space"> </span><span class="general1-number">3.0</span><span class="general1-space"> sphere </span><span class="general1-number">1
</span><span class="general1-reservedword">not</span><span class="general1-space"> </span><span class="general1-reservedword">wasted_or_busted
Jf</span><span class="general1-space"> </span><span class="general1-label">@Mission1Start</span><span class="general1-space"> _2
00BA: text_styled </span><span class="general1-string">'TextString'</span><span class="general1-space"> </span><span class="general1-number">1000</span><span class="general1-space"> ms </span><span class="general1-number">2</span><span class="general1-space"> </span><span class="general1-comment">// ну надо же текст вывести.
</span><span class="general1-reservedword">start_mission</span><span class="general1-number"> 1
</span><span class="general1-reservedword">end_thread</span></pre>
</div>
<br>
5) Так, поток создали, теперь остаётся написать миссию...<br>
     Вот основа любой миссии:<br><br>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard1();"  ></span>
<TEXTAREA ID="holdtext1" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext1" class="NON">
<span class="general1-label">:MISSION1
</span><span class="general1-reservedword">gosub</span><span class="general1-space"> </span><span class="general1-label">@KOD_MISSII</span><span class="general1-space">
</span><span class="general1-reservedword">if</span><span class="general1-space">
</span><span class="general1-reservedword">wasted_or_busted
Jf</span><span class="general1-space"> </span><span class="general1-label">@PROPUSK_KODA</span><span class="general1-space">
</span><span class="general1-reservedword">gosub</span><span class="general1-space"> </span><span class="general1-label">@KOD_PROVALA</span><span class="general1-space">

</span><span class="general1-label">:PROPUSK_KODA</span><span class="general1-space">
</span><span class="general1-reservedword">gosub</span><span class="general1-space"> </span><span class="general1-label">@UDALENIE_KODA
</span><span class="general1-reservedword">end_thread

</span><span class="general1-label">:KOD_MISSII</span><span class="general1-space">
</span><span class="general1-reservedword">increment_mission_attempts
</span><span class="general1-variable">$ONMISSION</span><span class="general1-space"> = </span><span class="general1-number">1
</span><span class="general1-symbol">0110: clear_player </span><span class="general1-variable">$PLAYER_CHAR</span><span class="general1-space"> wanted_level

</span><span class="general1-comment">//---------------------------- Тут пишется сама миссия --------------------

</span><span class="general1-label">:UDACHNO</span><span class="general1-space"> </span><span class="general1-comment">// ------- Сюда надо делать переход(Jump), если миссия удалась ---
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0
</span><span class="general1-symbol">01E3: text_1number_styled </span><span class="general1-string">'M_PASS'</span><span class="general1-space"> </span><span class="general1-number">25000</span><span class="general1-space"> </span><span class="general1-number">5000</span><span class="general1-space"> ms </span><span class="general1-number">4</span><span class="general1-space">
</span><span class="general1-class">Player</span><span class="general1-symbol">.</span><span class="general1-command">Money</span><span class="general1-symbol">(</span><span class="general1-variable">$PLAYER_CHAR</span><span class="general1-symbol">) += </span><span class="general1-number">25000
</span><span class="general1-symbol">0110: clear_player </span><span class="general1-variable">$PLAYER_CHAR</span><span class="general1-space"> wanted_level
0394: play_music </span><span class="general1-number">1</span><span class="general1-space">
</span><span class="general1-reservedword">gosub</span><span class="general1-space"> </span><span class="general1-label">@PROPUSK_KODA
</span><span class="general1-reservedword">return

</span><span class="general1-label">:KOD_PROVALA</span><span class="general1-space"> </span><span class="general1-comment">//--- Сюда надо делать переход(Jump), если миссия провалена --
</span><span class="general1-symbol">00BA: text_styled </span><span class="general1-string">'M_FAIL'</span><span class="general1-space"> </span><span class="general1-number">5000</span><span class="general1-space"> ms </span><span class="general1-number">1
</span><span class="general1-variable">$ONMISSION</span><span class="general1-space"> = </span><span class="general1-number">0</span><span class="general1-space">
</span><span class="general1-reservedword">mission_cleanup
create_thread</span><span class="general1-space"> </span><span class="general1-label">@Start
</span><span class="general1-reservedword">return

</span><span class="general1-label">:UDALENIE_KODA</span><span class="general1-space">
</span><span class="general1-variable">$ONMISSION</span><span class="general1-space"> = </span><span class="general1-number">0
</span><span class="general1-reservedword">mission_cleanup
return</span></pre>
</div>
<br>

Вот вам для примера моя небольшая миссия:<br>
<br>

Вот это пока только поток запуска миссии:<br><br>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard2();"  ></span>
<TEXTAREA ID="holdtext2" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext2">
<span class="general1-label">:StartMissii1
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0</span><span class="general1-space">
</span><span class="general1-class">Marker</span><span class="general1-symbol">.</span><span class="general1-command">CreateIconAndSphere</span><span class="general1-symbol">(</span><span class="general1-variable">1@</span><span class="general1-symbol">,</span><span class="general1-number">36</span><span class="general1-symbol">, </span><span class="general1-number">2490.7676</span><span class="general1-symbol">, -</span><span class="general1-number">1669.8162</span><span class="general1-symbol">, </span><span class="general1-number">13.3359</span><span class="general1-symbol">)

</span><span class="general1-label">:StartMissii1_2
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">250</span><span class="general1-space">
</span><span class="general1-reservedword">if</span><span class="general1-space"> </span><span class="general1-reservedword">and
</span><span class="general1-class">Player</span><span class="general1-symbol">.</span><span class="general1-command">Defined</span><span class="general1-symbol">(</span><span class="general1-variable">$PLAYER_CHAR</span><span class="general1-symbol">)
0102: actor </span><span class="general1-variable">$PLAYER_ACTOR</span><span class="general1-space"> stopped_near_point_on_foot </span><span class="general1-number">2490.7</span><span class="general1-space"> -</span><span class="general1-number">1669.8</span><span class="general1-space"> </span><span class="general1-number">13.4</span><span class="general1-space"> radius </span><span class="general1-number">2.0</span> <span class="general1-number">2.0</span><span class="general1-space"> </span><span class="general1-number">1.0</span><span class="general1-space"> sphere </span><span class="general1-number">1</span>
<span class="general1-reservedword">Jf</span><span class="general1-space"> </span><span class="general1-label">@StartMissii1_2
</span><span class="general1-class">Marker</span><span class="general1-symbol">.</span><span class="general1-command">Disable</span><span class="general1-symbol">(</span><span class="general1-variable">1@</span><span class="general1-symbol">)
</span><span class="general1-reservedword">start_mission</span><span class="general1-space"> </span><span class="general1-number">1</span><span class="general1-space">
</span><span class="general1-reservedword">end_thread</span></pre>
</div>
<br>

 А вот это уже сама миссия, смысл в том что появляются 3 балласа с М4 и пытаются вас снять:<br>
 <br>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard3();"  ></span>
<TEXTAREA ID="holdtext3" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext3" class="NON">
<span class="general1-label">:MIS1
</span><span class="general1-reservedword">gosub</span><span class="general1-space"> </span><span class="general1-label">@KOD_MISSII</span><span class="general1-space">
</span><span class="general1-reservedword">if</span><span class="general1-space">
</span><span class="general1-reservedword">wasted_or_busted
Jf</span><span class="general1-space"> </span><span class="general1-label">@PROPUSK_KODA</span><span class="general1-space">
</span><span class="general1-reservedword">gosub</span><span class="general1-space"> </span><span class="general1-label">@KOD_PROVALA</span><span class="general1-space">

</span><span class="general1-label">:PROPUSK_KODA</span><span class="general1-space">
</span><span class="general1-reservedword">gosub</span><span class="general1-space"> </span><span class="general1-label">@UDALENIE_KODA
</span><span class="general1-reservedword">end_thread

</span><span class="general1-label">:KOD_MISSII</span><span class="general1-space">
</span><span class="general1-reservedword">increment_mission_attempts
</span><span class="general1-variable">$ONMISSION</span><span class="general1-space"> = </span><span class="general1-number">1
</span><span class="general1-symbol">0110: clear_player </span><span class="general1-variable">$PLAYER_CHAR</span><span class="general1-space"> wanted_level

</span><span class="general1-label">:LabelMis1_1
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0
</span><span class="general1-reservedword">fade</span><span class="general1-space"> </span><span class="general1-number">0</span><span class="general1-space"> </span><span class="general1-number">500
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Load</span><span class="general1-symbol">(</span><span class="general1-model">#BALLAS1</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Load</span><span class="general1-symbol">(</span><span class="general1-model">#BALLAS2</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Load</span><span class="general1-symbol">(</span><span class="general1-model">#BALLAS3</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Load</span><span class="general1-symbol">(</span><span class="general1-model">#M4</span><span class="general1-symbol">)
038B: load_requested_models

</span><span class="general1-label">:LabelMis1_2
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0
</span><span class="general1-reservedword">if</span><span class="general1-space"> </span><span class="general1-reservedword">and
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Available</span><span class="general1-symbol">(</span><span class="general1-model">#BALLAS1</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Available</span><span class="general1-symbol">(</span><span class="general1-model">#BALLAS2</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Available</span><span class="general1-symbol">(</span><span class="general1-model">#BALLAS3</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Available</span><span class="general1-symbol">(</span><span class="general1-model">#M4</span><span class="general1-symbol">)
</span><span class="general1-reservedword">Jf</span><span class="general1-space"> </span><span class="general1-label">@LabelMis1_2
</span><span class="general1-reservedword">fade</span><span class="general1-space"> </span><span class="general1-number">1</span><span class="general1-space"> </span><span class="general1-number">500
</span><span class="general1-class">actor</span><span class="general1-symbol">.</span><span class="general1-command">Create</span><span class="general1-symbol">(</span><span class="general1-variable">1@</span><span class="general1-symbol">,</span><span class="general1-number">4</span><span class="general1-symbol">,</span><span class="general1-model">#BALLAS1</span><span class="general1-symbol">,</span><span class="general1-number">2517.8367</span><span class="general1-symbol">, -</span><span class="general1-number">1664.6057</span><span class="general1-symbol">, </span><span class="general1-number">14.0369</span><span class="general1-symbol">)
</span><span class="general1-class">actor</span><span class="general1-symbol">.</span><span class="general1-command">Create</span><span class="general1-symbol">(</span><span class="general1-variable">2@</span><span class="general1-symbol">,</span><span class="general1-number">4</span><span class="general1-symbol">,</span><span class="general1-model">#BALLAS2</span><span class="general1-symbol">,</span><span class="general1-number">2517.1902</span><span class="general1-symbol">, -</span><span class="general1-number">1667.9568</span><span class="general1-symbol">, </span><span class="general1-number">14.028</span><span class="general1-symbol">)
</span><span class="general1-class">actor</span><span class="general1-symbol">.</span><span class="general1-command">Create</span><span class="general1-symbol">(</span><span class="general1-variable">3@</span><span class="general1-symbol">,</span><span class="general1-number">4</span><span class="general1-symbol">,</span><span class="general1-model">#BALLAS3</span><span class="general1-symbol">,</span><span class="general1-number">2516.353</span><span class="general1-symbol">, -</span><span class="general1-number">1671.1974</span><span class="general1-symbol">, </span><span class="general1-number">13.8478</span><span class="general1-symbol">)
01B2: give_actor </span><span class="general1-variable">1@</span><span class="general1-space"> weapon </span><span class="general1-number">31</span><span class="general1-space"> ammo </span><span class="general1-number">999999
</span><span class="general1-symbol">01B2: give_actor </span><span class="general1-variable">2@</span><span class="general1-space"> weapon </span><span class="general1-number">31</span><span class="general1-space"> ammo </span><span class="general1-number">999999</span><span class="general1-space">
01B2: give_actor </span><span class="general1-variable">3@</span><span class="general1-space"> weapon </span><span class="general1-number">31</span><span class="general1-space"> ammo </span><span class="general1-number">999999
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">500
</span><span class="general1-symbol">05E2: AS_actor </span><span class="general1-variable">1@</span><span class="general1-space"> kill_actor </span><span class="general1-variable">$PLAYER_ACTOR</span><span class="general1-space">
05E2: AS_actor </span><span class="general1-variable">2@</span><span class="general1-space"> kill_actor </span><span class="general1-variable">$PLAYER_ACTOR
</span><span class="general1-symbol">05E2: AS_actor </span><span class="general1-variable">3@</span><span class="general1-space"> kill_actor </span><span class="general1-variable">$PLAYER_ACTOR

</span><span class="general1-label">:LabelMis1_3
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0
</span><span class="general1-reservedword">if</span><span class="general1-space">
</span><span class="general1-reservedword">wasted_or_busted
jf</span><span class="general1-space"> </span><span class="general1-label">@LabelMis1_4
</span><span class="general1-reservedword">jump</span><span class="general1-space"> </span><span class="general1-label">@KOD_PROVALA</span><span class="general1-space">

</span><span class="general1-label">:LabelMis1_4
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0
</span><span class="general1-reservedword">if</span><span class="general1-space"> </span><span class="general1-reservedword">and
</span><span class="general1-class">actor</span><span class="general1-symbol">.</span><span class="general1-command">Dead</span><span class="general1-symbol">(</span><span class="general1-variable">1@</span><span class="general1-symbol">)
</span><span class="general1-class">actor</span><span class="general1-symbol">.</span><span class="general1-command">Dead</span><span class="general1-symbol">(</span><span class="general1-variable">2@</span><span class="general1-symbol">)
</span><span class="general1-class">actor</span><span class="general1-symbol">.</span><span class="general1-command">Dead</span><span class="general1-symbol">(</span><span class="general1-variable">3@</span><span class="general1-symbol">)
</span><span class="general1-reservedword">jf</span><span class="general1-space"> </span><span class="general1-label">@LabelMis1_3

:UDACHNO
</span><span class="general1-space"> </span><span class="general1-comment">// ------- Сюда надо делать переход(Jump), если миссия удалась --------
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0</span><span class="general1-space">
01E3: text_1number_styled </span><span class="general1-string">'M_PASS'</span><span class="general1-space"> </span><span class="general1-number">25000</span><span class="general1-space"> </span><span class="general1-number">5000</span><span class="general1-space"> ms </span><span class="general1-number">4</span><span class="general1-space">
</span><span class="general1-class">Player</span><span class="general1-symbol">.</span><span class="general1-command">Money</span><span class="general1-symbol">(</span><span class="general1-variable">$PLAYER_CHAR</span><span class="general1-symbol">) += </span><span class="general1-number">25000
</span><span class="general1-symbol">0110: clear_player </span><span class="general1-variable">$PLAYER_CHAR</span><span class="general1-space"> wanted_level
0394: play_music </span><span class="general1-number">1
</span><span class="general1-reservedword">gosub</span><span class="general1-space"> </span><span class="general1-label">@PROPUSK_KODA
</span><span class="general1-reservedword">return

</span><span class="general1-label">:KOD_PROVALA
</span><span class="general1-space"> </span><span class="general1-comment">// ------- Сюда надо делать переход(Jump), если миссия провалена --------
</span><span class="general1-symbol">00BA: text_styled </span><span class="general1-string">'M_FAIL'</span><span class="general1-space"> </span><span class="general1-number">5000</span><span class="general1-space"> ms </span><span class="general1-number">1
</span><span class="general1-variable">$ONMISSION</span><span class="general1-space"> = </span><span class="general1-number">0
</span><span class="general1-reservedword">mission_cleanup
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">destroy</span><span class="general1-symbol">(</span><span class="general1-model">#BALLAS1</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">destroy</span><span class="general1-symbol">(</span><span class="general1-model">#BALLAS2</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">destroy</span><span class="general1-symbol">(</span><span class="general1-model">#BALLAS3</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">destroy</span><span class="general1-symbol">(</span><span class="general1-model">#M4</span><span class="general1-symbol">)
</span><span class="general1-reservedword">create_thread</span><span class="general1-space"> </span><span class="general1-label">@StartMissii1
</span><span class="general1-reservedword">return
</span><span class="general1-label">:UDALENIE_KODA</span><span class="general1-space">
</span><span class="general1-variable">$ONMISSION</span><span class="general1-space"> = </span><span class="general1-number">0
</span><span class="general1-reservedword">mission_cleanup
return</span></pre>
</div>
<br>

Сейчас я напишу пример простейшей гоночной миссии, будем использовать за стартовый поток тот же, что и в предыдущем примере , вот :<br>
<br>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard4();"  ></span>
<TEXTAREA ID="holdtext4" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext4">
<span class="general1-label">:StartMissii1
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0</span><span class="general1-space">
</span><span class="general1-class">Marker</span><span class="general1-symbol">.</span><span class="general1-command">CreateIconAndSphere</span><span class="general1-symbol">(</span><span class="general1-variable">1@</span><span class="general1-symbol">,</span><span class="general1-number">36</span><span class="general1-symbol">, </span><span class="general1-number">2490.7676</span><span class="general1-symbol">, -</span><span class="general1-number">1669.8162</span><span class="general1-symbol">, </span><span class="general1-number">13.3359</span><span class="general1-symbol">)

</span><span class="general1-label">:StartMissii1_2
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">250
</span><span class="general1-reservedword">if</span><span class="general1-space"> </span><span class="general1-reservedword">and
</span><span class="general1-class">Player</span><span class="general1-symbol">.</span><span class="general1-command">Defined</span><span class="general1-symbol">(</span><span class="general1-variable">$PLAYER_CHAR</span><span class="general1-symbol">)
0102: actor </span><span class="general1-variable">$PLAYER_ACTOR</span><span class="general1-space"> stopped_near_point_on_foot </span><span class="general1-number">2490.7</span><span class="general1-space"> -</span><span class="general1-number">1669.8</span><span class="general1-space"> </span><span class="general1-number">13.4</span><span class="general1-space"> radius </span><span class="general1-number">2.0</span> <span class="general1-number">2.0</span><span class="general1-space"> </span><span class="general1-number">1.0</span><span class="general1-space"> sphere </span><span class="general1-number">1</span><span class="general1-reservedword">
Jf</span><span class="general1-space"> </span><span class="general1-label">@StartMissii1_2
</span><span class="general1-class">Marker</span><span class="general1-symbol">.</span><span class="general1-command">Disable</span><span class="general1-symbol">(</span><span class="general1-variable">1@</span><span class="general1-symbol">)
</span><span class="general1-reservedword">start_mission</span><span class="general1-space"> </span><span class="general1-number">1</span><span class="general1-space">
</span><span class="general1-reservedword">end_thread</span></pre>
</div><br>

Вот миссия, в ней те же названия label'ов, что и в предыдущей, поэтому удалите или измените ту...<br>
Смотрим :<br>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard5();"  ></span>
<TEXTAREA ID="holdtext5" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext5">
<span class="general1-label">:MIS1
</span><span class="general1-reservedword">gosub</span><span class="general1-space"> </span><span class="general1-label">@KOD_MISSII</span><span class="general1-space">
</span><span class="general1-reservedword">if</span><span class="general1-space">
</span><span class="general1-reservedword">wasted_or_busted
Jf</span><span class="general1-space"> </span><span class="general1-label">@PROPUSK_KODA</span><span class="general1-space">
</span><span class="general1-reservedword">gosub</span><span class="general1-space"> </span><span class="general1-label">@KOD_PROVALA</span><span class="general1-space">

</span><span class="general1-label">:PROPUSK_KODA</span><span class="general1-space">
</span><span class="general1-reservedword">gosub</span><span class="general1-space"> </span><span class="general1-label">@UDALENIE_KODA
</span><span class="general1-reservedword">end_thread
</span><span class="general1-label">:KOD_MISSII</span><span class="general1-space">
</span><span class="general1-reservedword">increment_mission_attempts
</span><span class="general1-variable">$ONMISSION</span><span class="general1-space"> = </span><span class="general1-number">1
</span><span class="general1-symbol">0110: clear_player </span><span class="general1-variable">$PLAYER_CHAR</span><span class="general1-space"> wanted_level

</span><span class="general1-label">:LabelMis1_1
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Load</span><span class="general1-symbol">(</span><span class="general1-model">#CHEETAH</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Load</span><span class="general1-symbol">(</span><span class="general1-model">#BALLAS1</span><span class="general1-symbol">)
038B: load_requested_models

</span><span class="general1-label">:LabelMis1_2
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0
</span><span class="general1-reservedword">if</span><span class="general1-space"> </span><span class="general1-reservedword">and
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Available</span><span class="general1-symbol">(</span><span class="general1-model">#CHEETAH</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Available</span><span class="general1-symbol">(</span><span class="general1-model">#BALLAS1</span><span class="general1-symbol">)
</span><span class="general1-reservedword">Jf</span><span class="general1-space"> </span><span class="general1-label">@LabelMis1_2
</span><span class="general1-class">car</span><span class="general1-symbol">.</span><span class="general1-command">Create</span><span class="general1-symbol">(</span><span class="general1-variable">1@</span><span class="general1-symbol">,</span><span class="general1-model">#CHEETAH</span><span class="general1-symbol">,</span><span class="general1-number">2461.0037</span><span class="general1-symbol">, -</span><span class="general1-number">1657.0515</span><span class="general1-symbol">, </span><span class="general1-number">13.3047</span><span class="general1-symbol">)
</span><span class="general1-class">car</span><span class="general1-symbol">.</span><span class="general1-command">Angle</span><span class="general1-symbol">(</span><span class="general1-variable">1@</span><span class="general1-symbol">) = </span><span class="general1-number">90.0
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">100
</span><span class="general1-symbol">0129: </span><span class="general1-variable">2@</span><span class="general1-space"> = create_actor </span><span class="general1-number">4</span><span class="general1-space"> </span><span class="general1-model">#BALLAS1</span><span class="general1-space"> in_car </span><span class="general1-variable">1@</span><span class="general1-space"> driverseat
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">500
</span><span class="general1-class">marker</span><span class="general1-symbol">.</span><span class="general1-command">CreateIconAndSphere</span><span class="general1-symbol">(</span><span class="general1-variable">3@</span><span class="general1-symbol">,</span><span class="general1-number">11</span><span class="general1-symbol">,</span><span class="general1-number">2461.0</span><span class="general1-symbol">, -</span><span class="general1-number">1661.7</span><span class="general1-symbol">, </span><span class="general1-number">13.3047</span><span class="general1-symbol">)

</span><span class="general1-label">:LabelMis1_3
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0
</span><span class="general1-reservedword">if</span><span class="general1-space">
0103: actor </span><span class="general1-variable">$PLAYER_ACTOR</span><span class="general1-space"> stopped_near_point_in_car </span><span class="general1-number">2461.0</span><span class="general1-space"> -</span><span class="general1-number">1661.7</span><span class="general1-space"> </span><span class="general1-number">13.3</span><span class="general1-space"> radius </span><span class="general1-number">2.0</span><span class="general1-space">
</span><span class="general1-number">2.0</span><span class="general1-space"> </span><span class="general1-number">6.0</span><span class="general1-space"> sphere </span><span class="general1-number">1</span><span class="general1-space"> </span><span class="general1-comment">// все пишется одной строкой
</span><span class="general1-reservedword">Jf</span><span class="general1-space"> </span><span class="general1-label">@LabelMis1_3
</span><span class="general1-symbol">03C0: </span><span class="general1-variable">4@</span><span class="general1-space"> = actor </span><span class="general1-variable">$PLAYER_ACTOR</span><span class="general1-space"> car
</span><span class="general1-class">car</span><span class="general1-symbol">.</span><span class="general1-command">LockInCurrentPosition</span><span class="general1-symbol">(</span><span class="general1-variable">4@</span><span class="general1-symbol">) = </span><span class="general1-reservedword">true
wait</span><span class="general1-space"> </span><span class="general1-number">2000
</span><span class="general1-class">car</span><span class="general1-symbol">.</span><span class="general1-command">DriveTo</span><span class="general1-symbol">(</span><span class="general1-variable">1@</span><span class="general1-symbol">,</span><span class="general1-number">2040.131</span><span class="general1-symbol">, -</span><span class="general1-number">1611.939</span><span class="general1-symbol">, </span><span class="general1-number">13.3828</span><span class="general1-symbol">)
</span><span class="general1-class">car</span><span class="general1-symbol">.</span><span class="general1-command">SetMaxSpeed</span><span class="general1-symbol">(</span><span class="general1-variable">1@</span><span class="general1-symbol">,</span><span class="general1-number">40.0</span><span class="general1-symbol">)
</span><span class="general1-class">car</span><span class="general1-symbol">.</span><span class="general1-command">LockInCurrentPosition</span><span class="general1-symbol">(</span><span class="general1-variable">4@</span><span class="general1-symbol">) = </span><span class="general1-reservedword">false
</span><span class="general1-symbol">00AE: unknown_set_car </span><span class="general1-variable">1@</span><span class="general1-space"> to_ignore_traffic_lights </span><span class="general1-number">2
</span><span class="general1-symbol">03BC: </span><span class="general1-variable">5@</span><span class="general1-space"> = create_sphere </span><span class="general1-number">2040.131</span><span class="general1-space"> -</span><span class="general1-number">1611.939</span><span class="general1-space"> </span><span class="general1-number">13.3828</span><span class="general1-space"> </span><span class="general1-number">5.0
</span><span class="general1-class">marker</span><span class="general1-symbol">.</span><span class="general1-command">Disable</span><span class="general1-symbol">(</span><span class="general1-variable">3@</span><span class="general1-symbol">)

</span><span class="general1-label">:LabelMis1_4
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0
</span><span class="general1-reservedword">if
</span><span class="general1-symbol">0100: actor </span><span class="general1-variable">2@</span><span class="general1-space"> near_point_in_car </span><span class="general1-number">2040.131</span><span class="general1-space"> -</span><span class="general1-number">1611.939</span><span class="general1-space"> </span><span class="general1-number">13.3828</span><span class="general1-space"> radius </span><span class="general1-number">6.0</span><span class="general1-space"> </span><span class="general1-number">6.0</span><span class="general1-space"> </span><span class="general1-number">6.0</span><span class="general1-space"> sphere </span><span class="general1-number">1
</span><span class="general1-reservedword">jf</span><span class="general1-space"> </span><span class="general1-label">@LabelMis1_5
</span><span class="general1-reservedword">jump</span><span class="general1-space"> </span><span class="general1-label">@KOD_PROVALA</span><span class="general1-space">

</span><span class="general1-label">:LabelMis1_5
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0
</span><span class="general1-reservedword">if
</span><span class="general1-symbol">0100: actor </span><span class="general1-variable">$PLAYER_ACTOR</span><span class="general1-space"> near_point_in_car </span><span class="general1-number">2040.131</span><span class="general1-space"> -</span><span class="general1-number">1611.939</span><span class="general1-space"> </span><span class="general1-number">13.3828</span><span class="general1-space"> radius </span><span class="general1-number">6.0 </span><span class="general1-number">6.0</span><span class="general1-space"> </span><span class="general1-number">6.0</span><span class="general1-space"> sphere </span><span class="general1-number">1</span><span class="general1-space"> </span><span class="general1-reservedword">
jf</span><span class="general1-space"> </span><span class="general1-label">@LabelMis1_4

:UDACHNO
</span><span class="general1-space"> </span><span class="general1-comment">// ------- Сюда надо делать переход(Jump), если миссия удалась --------
</span><span class="general1-reservedword">wait</span><span class="general1-space"> </span><span class="general1-number">0</span><span class="general1-space">
01E3: text_1number_styled </span><span class="general1-string">'M_PASS'</span><span class="general1-space"> </span><span class="general1-number">25000</span><span class="general1-space"> </span><span class="general1-number">5000</span><span class="general1-space"> ms </span><span class="general1-number">4</span><span class="general1-space">
</span><span class="general1-class">Player</span><span class="general1-symbol">.</span><span class="general1-command">Money</span><span class="general1-symbol">(</span><span class="general1-variable">$PLAYER_CHAR</span><span class="general1-symbol">) += </span><span class="general1-number">25000
</span><span class="general1-symbol">0110: clear_player </span><span class="general1-variable">$PLAYER_CHAR</span><span class="general1-space"> wanted_level
0394: play_music </span><span class="general1-number">1</span><span class="general1-space">
</span><span class="general1-class">marker</span><span class="general1-symbol">.</span><span class="general1-command">Disable</span><span class="general1-symbol">(</span><span class="general1-variable">5@</span><span class="general1-symbol">)
</span><span class="general1-class">actor</span><span class="general1-symbol">.</span><span class="general1-command">RemoveReferences</span><span class="general1-symbol">(</span><span class="general1-variable">2@</span><span class="general1-symbol">)
</span><span class="general1-class">car</span><span class="general1-symbol">.</span><span class="general1-command">RemoveReferences</span><span class="general1-symbol">(</span><span class="general1-variable">1@</span><span class="general1-symbol">)
</span><span class="general1-class">car</span><span class="general1-symbol">.</span><span class="general1-command">RemoveReferences</span><span class="general1-symbol">(</span><span class="general1-variable">4@</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Destroy</span><span class="general1-symbol">(</span><span class="general1-model">#BALLAS1</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Destroy</span><span class="general1-symbol">(</span><span class="general1-model">#CHEETAH</span><span class="general1-symbol">)
</span><span class="general1-reservedword">gosub</span><span class="general1-space"> </span><span class="general1-label">@PROPUSK_KODA
</span><span class="general1-reservedword">return

</span><span class="general1-label">:KOD_PROVALA</span><span class="general1-space">
</span><span class="general1-comment">// ------- Сюда надо делать переход(Jump), если миссия провалена --------
</span><span class="general1-symbol">00BA: text_styled </span><span class="general1-string">'M_FAIL'</span><span class="general1-space"> </span><span class="general1-number">5000</span><span class="general1-space"> ms </span><span class="general1-number">1
</span><span class="general1-variable">$ONMISSION</span><span class="general1-space"> = </span><span class="general1-number">0</span><span class="general1-space">
</span><span class="general1-reservedword">mission_cleanup
</span><span class="general1-class">marker</span><span class="general1-symbol">.</span><span class="general1-command">Disable</span><span class="general1-symbol">(</span><span class="general1-variable">5@</span><span class="general1-symbol">)
</span><span class="general1-class">actor</span><span class="general1-symbol">.</span><span class="general1-command">RemoveReferences</span><span class="general1-symbol">(</span><span class="general1-variable">2@</span><span class="general1-symbol">)
</span><span class="general1-class">car</span><span class="general1-symbol">.</span><span class="general1-command">RemoveReferences</span><span class="general1-symbol">(</span><span class="general1-variable">1@</span><span class="general1-symbol">)
</span><span class="general1-class">car</span><span class="general1-symbol">.</span><span class="general1-command">RemoveReferences</span><span class="general1-symbol">(</span><span class="general1-variable">4@</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Destroy</span><span class="general1-symbol">(</span><span class="general1-model">#BALLAS1</span><span class="general1-symbol">)
</span><span class="general1-class">model</span><span class="general1-symbol">.</span><span class="general1-command">Destroy</span><span class="general1-symbol">(</span><span class="general1-model">#CHEETAH</span><span class="general1-symbol">)
</span><span class="general1-reservedword">create_thread</span><span class="general1-space"> </span><span class="general1-label">@RADIO
</span><span class="general1-reservedword">return

</span><span class="general1-label">:UDALENIE_KODA</span><span class="general1-space">
</span><span class="general1-variable">$ONMISSION</span><span class="general1-space"> = </span><span class="general1-number">0
</span><span class="general1-reservedword">mission_cleanup
return</span></pre>
</div>

<br>	    </TD>
          <TD width=5
        background="rtd.gif"></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5><IMG height=20
            src="img/ru/mtdlbot.png" width=5 border=0></TD>
          <TD align=left
            background="mtdbgbot.png"></TD>
          <TD class=ninfo align=right
          background="mtdbgbot.png">&nbsp;
            </TD>
          <TD width=5><IMG height=20
            src="img/ru/mtdrbot.png" width=5
        border=0></TD></TR></TBODY></TABLE></DIV>
<BR><BR></TD></TR><td width="100%"></TBODY></TABLE>
</TABLE></body></html>
