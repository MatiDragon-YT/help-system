<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML><HEAD><TITLE>Массивы</TITLE>
<script language="javascript" type="text/javascript" src="img/ru/clipboard.js"></script>
<link rel="stylesheet" type="text/css" href="../../style/style.css">
<META http-equiv=Content-Type content="text/html; charset=windows-1251">
</HEAD>
<BODY topMargin=0 >
<TABLE
style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: #c0c0c0 1px solid"
height=121 cellSpacing=0 cellPadding=0 width=640>
  <TBODY>
  <TR>
    <TD vAlign=top width="100%"><IMG
      src="img/ru/logo2.jpg" width="640" height="121" border=0 class="conthdr" ></TD>
  </TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width=640 border=0>
  <TBODY>

  <TD width="100%" height="100%" vAlign=top>
   <DIV><IMG
      src="img/ru/old/coding/articles.png" width="640" height="33"></DIV>


      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5><IMG height=36
            src="img/ru/mtdl.png" width=5></TD>
          <TD class=ntitle vAlign=top
          background="mtdbg.png" height=36>Массивы</TD>
          <TD width=5><IMG height=36
            src="img/ru/mtdr.png"
      width=20></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5 background="ltd.gif"></TD>
          <TD class=news>

<p>
	Массивы представляют собой набор индексированных элементов одного
	типа (тип массива). К каждому элементу массива можно обратиться напрямую, используя его индекс (номер элемента в массиве). Нумерация элементов идет, начиная с нуля.</p>
<p>
	Массивы поддерживаются играми SA и LCS, VCS.</p>
<p>
	Синтаксис:
<p>
	San Andreas:<br>
<strong>&lt;имя массива&gt;(&lt;имя индексной переменной&gt;,&lt;размер&gt;&lt;тип&gt;)
</strong></p><p>
	Liberty City Stories, Vice City Stories:<br>
<strong>&lt;имя массива&gt;(&ltимя индексной переменной&gt;,&ltразмер&gt;)</strong></p>
<p>
<strong>&lt;Имя массива&gt;:</strong> локальная или глобальная переменная.<br>
	Имя переменной должно быть выбрано с учетом размера массива.
	Например, в потоке нельзя использовать в качестве имени переменную <span class="general1-variable">33@</span>,
	если размер массива больше 1, так как в потоках максимально допустимая
	локальная переменная это <span class="general1-variable">33@</span>, а элемент массива <span class="general1-variable">33@</span> с индексом больше
	0 будет за этими границами.</p>
<p><strong>
	&lt;Имя индексной переменной&gt;</strong>: любая переменная.
</p><p><strong>
	<a name="size">&lt;Размер&gt;</a></strong>: любое целое число больше нуля.
</p><p><strong>
	&lt;Тип&gt;</strong>: буквы i f s v обозначающие один из <a name="type">типов</a> массива:
</p><p><strong>
	i</strong>: integer, только целые значения, размер элемента 4 байта
</p><p><strong>	f</strong>: float, дробные значения, размер элемента 4 байта
</p>
<p><strong>	s</strong>: string, строки с фиксированной длиной 8 байтов
</p><p><strong>	v</strong>: longstring, строки с фиксированной длиной 16 байтов
</p><p>
	В LCS, VCS элементы массива могут иметь только размер 4 байта, поэтому
	указание типа не требуется.
	Массив может содержать элементы только одного типа.
</p>
<p>

	Пример: чтобы обратиться к первому элементу массива, состоящего из
	десяти элементов, нужно использовать такую запись:</p>
<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard();"  ></span>
<TEXTAREA ID="holdtext" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext" class="NON"><span class="general1-variable">$index</span> = <span class="general1-number">0
</span><span class="general1-variable">$array</span>(<span class="general1-variable">$index</span>,<span class="general1-number">10i</span>) = <span class="general1-number">1</span></pre>
</div>
<p>	Sanny Builder позволяет упростить работу с массивами двумя способами:
</p>
<p>	<a name="VAR_END" id="VAR_END"><strong>1)</strong></a> определить его в блоке <span class="general1-reservedword">VAR..END</span></p>
<p>	Используется следующая запись:<br></p>
<div class=mycode5>	<span class="general1-reservedword">var</span><br>
	 &lt;array name&gt;: array &lt;size&gt; of &lt;type&gt;<br>
	 <span class="general1-reservedword">end</span></div><br>
	<br>
	Например:	<br>
<br>
	<div  class="imgcursor" align="right"><span class="kbd"><img src="img/ru/ico_cb.gif" alt="Copy to Clipboard" width="16" height="16"  onClick="ClipBoard1();"  ></span>
 <TEXTAREA ID="holdtext1" STYLE="display:none;"></TEXTAREA></div>
<div class=mycode5>
<pre id="copytext1" class="NON"><span class="general1-reservedword">var</span>
<span class="general1-variable">$FloatArray</span>: array <span class="general1-number">10</span> of Float
<span class="general1-reservedword">end</span></pre>
</div>
<p>	После этого вы можете работать с этим массивом без указания его типа
	и размера. Например:</p>
<div class=mycode5>

	<span class="general1-variable">$FloatArray</span>[<span class="general1-variable">$RndIndex</span>] += <span class="general1-number">100.0</span></div>
<p>	<a name="Index"><strong>2)</strong></a> использовать индексированные переменные</p>
<p>
	Допустим, у вас есть массив <span class="general1-variable">$strings</span>, состоящий из <span class="general1-number">10</span> элементов типа s.
	Вы можете обратиться к его элементам, напрямую через переменную <span class="general1-variable">$strings</span>.
	Например, для записи в последную ячейку массива используйте запись:</p>
<div class=mycode5>
	<span class="general1-variable">s$strings</span>[<span class="general1-number">9</span>] = <span class="general1-string">'str10'</span></div>
<p>	Индексированные переменные очень удобно использовать для инициализации
	массива с разными стартовыми значениями элементов:<br></p>
<div class=mycode5>	<span class="general1-variable">s$strings</span>[<span class="general1-number">0</span>] = <span class="general1-string">'str1'</span><br>
	<span class="general1-variable">s$strings</span>[<span class="general1-number">1</span>] = <span class="general1-string">'str2'</span><br><br>
	...<br><br>
	<span class="general1-variable">s$strings</span>[<span class="general1-number">9</span>] = <span class="general1-string">'str10'</span><br>
</pre></div>
<p>	После этого вы можете использовать и полный вариант записи:</p>
<div class=mycode5>	<span class="general1-variable">$index</span> = <span class="general1-number">9</span><br>
	<span class="general1-reservedword">if </span><br>
	  <span class="general1-variable">s$strings</span>(<span class="general1-variable">$index</span>,<span class="general1-number">10s</span>) ==<span class="general1-string"> 'str10'</span><br>
	  <span class="general1-reservedword">then</span><br>
	  <span class="general1-variable">0@</span> += <span class="general1-number">1</span><br>
	  <span class="general1-reservedword">end</span></div>
<p>
	Такие переменные могут использоваться и в качестве имени класса, когда
	они объявлены как массив, например</p>
<div class="mycode5">
  <span class="general1-variable">$cars</span>[<span class="general1-number">0</span>].<span class="general1-command">Destroy</span></div>
<p>Смотри объявление массива <a href="#VAR_END">выше</a>.</p>
<p>
	По умолчанию при декомпиляции в режиме SA элементы массива записываются
	как индексированные переменные. Вы можете отключить эту возможность
	через <a href="console.htm">консоль</a> (команда <a href="console.htm#CONSTANT_INDEXES">toggle constant_indexes off</a>). Тогда переменные
	будут декомпилироваться как обычно.
	Возможность декомпилировать с данной опцией доступна и для LCS, VCS
	(по умолчанию выключено).</P>
<p>	О массивах см. также:&nbsp;


  <a href="articles6.htm">  Меняем игровую память через SCM (San Andreas)</a></p>
          </TD>
          <TD width=5
        background="rtd.gif"></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%">
        <TBODY>
        <TR>
          <TD width=5><IMG height=20
            src="img/ru/mtdlbot.png" width=5 border=0></TD>
          <TD align=left
            background="mtdbgbot.png"> </TD>
          <TD class=ninfo align=right
          background="mtdbgbot.png">&nbsp;
            </TD>
          <TD width=5><IMG height=20
            src="img/ru/mtdrbot.png" width=5
        border=0></TD></TR></TBODY></TABLE></DIV>
<BR><BR></TD></TR><td width="100%"></TBODY></TABLE>
</TABLE></body></html>
